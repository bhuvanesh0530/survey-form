<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="UTF-8">
  <title>PROJECT SIVD PHASE I: BASELINE HOUSEHOLD SURVEY</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#1565C0 0%,#0D47A1 100%);min-height:100vh;padding:20px;display:flex;align-items:flex-start;justify-content:center}
    .container{max-width:700px;width:100%;background:white;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,0.3);overflow:hidden;margin:0 auto}
    .header{background:linear-gradient(135deg,#1565C0 0%,#0D47A1 100%);color:white;padding:20px 25px;text-align:center}
    .header h1{font-size:16px;font-weight:700;margin-bottom:2px;letter-spacing:0.5px}
    .header h2{font-size:13px;font-weight:400;opacity:0.9;margin-bottom:4px}
    .header p{font-size:11px;opacity:0.75}
    .form-body{padding:20px 25px}
    .consent-box{background:#FFF8E1;border:2px solid #F9A825;border-radius:12px;padding:16px;margin-bottom:18px}
    .consent-box h3{color:#E65100;font-size:13px;margin-bottom:8px}
    .consent-text{font-size:12px;color:#333;line-height:1.6;margin-bottom:12px;white-space:pre-wrap}
    .consent-audio-btn{background:#F9A825;color:white;border:none;border-radius:8px;padding:7px 14px;font-size:12px;cursor:pointer;margin-bottom:10px;display:flex;align-items:center;gap:5px}
    .consent-audio-btn.playing{background:#e53935;animation:pulse 1s infinite}
    .consent-options{display:flex;gap:10px;flex-wrap:wrap}
    .consent-opt{display:flex;align-items:center;gap:7px;padding:9px 14px;border:2px solid #e0e0e0;border-radius:10px;cursor:pointer;transition:all .2s;font-size:13px}
    .consent-opt:hover{border-color:#1565C0;background:#E3F2FD}
    .consent-opt.selected{border-color:#1565C0;background:#E3F2FD;font-weight:600}
    .consent-opt input{width:16px;height:16px;accent-color:#1565C0}
    .section-block{margin-bottom:6px;margin-top:22px}
    .section-title{font-size:13px;font-weight:700;color:#1565C0;padding:8px 12px;background:#E3F2FD;border-left:4px solid #1565C0;border-radius:0 8px 8px 0;margin-bottom:14px}
    .section-subtitle{font-size:11px;color:#666;margin-top:2px;padding-left:12px}
    .q-block{margin-bottom:18px;display:block}
    .q-block.hidden{display:none}
    .section-block.hidden{display:none}
    .q-header{display:flex;align-items:flex-start;gap:8px;margin-bottom:8px}
    .q-number{font-size:11px;color:#1565C0;font-weight:700;min-width:28px;padding-top:2px}
    .q-text{font-size:13px;font-weight:600;color:#333;flex:1;line-height:1.4}
    .q-audio-hint{font-size:10px;color:#888;margin-top:2px;font-style:italic}
    .btn-audio{background:linear-gradient(135deg,#1565C0,#0D47A1);color:white;border:none;border-radius:50%;width:34px;height:34px;min-width:34px;cursor:pointer;font-size:16px;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all .2s;margin-top:0}
    .btn-audio:hover{transform:scale(1.1)}
    .btn-audio.playing{background:#e53935;animation:pulse 1s infinite}
    .btn-audio.loading{background:#f59e0b;animation:pulse .5s infinite}
    @keyframes pulse{0%,100%{opacity:1}50%{opacity:.6}}
    .input-row{display:flex;gap:8px;align-items:stretch}
    .dual-input{display:flex;gap:8px;flex:1}
    input[type=text],input[type=tel],input[type=number]{flex:1;padding:10px;border:2px solid #e0e0e0;border-radius:10px;font-size:14px;outline:none;transition:border-color .2s}
    input:focus{border-color:#1565C0}
    .inp-lbl{font-size:10px;color:#888;text-align:center;margin-top:3px}
    .btn-mic{padding:10px 13px;background:linear-gradient(135deg,#1565C0,#0D47A1);color:white;border:none;border-radius:10px;cursor:pointer;font-size:17px;min-width:48px;display:flex;align-items:center;justify-content:center}
    .btn-mic.recording{background:#e53935;animation:pulse 1s infinite}
    .options-list{display:flex;flex-direction:column;gap:7px}
    .opt-item{display:flex;align-items:center;gap:8px;padding:9px 12px;border:1.5px solid #e0e0e0;border-radius:10px;cursor:pointer;transition:all .2s}
    .opt-item:hover{border-color:#1565C0;background:#f0f4ff}
    .opt-item.selected{border-color:#1565C0;background:#E3F2FD}
    .opt-item input[type=radio],.opt-item input[type=checkbox]{width:16px;height:16px;accent-color:#1565C0;flex-shrink:0}
    .opt-label{flex:1;font-size:13px;color:#333}
    .opt-audio{background:#1565C0;color:white;border:none;border-radius:50%;width:26px;height:26px;min-width:26px;font-size:11px;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0}
    .opt-audio:hover{background:#0D47A1}
    .matrix-wrap{overflow-x:auto}
    .matrix-table{width:100%;border-collapse:collapse;font-size:12px}
    .matrix-table th{background:#1565C0;color:white;padding:8px 10px;text-align:center}
    .matrix-table th.row-header{text-align:left;min-width:160px}
    .matrix-table td{padding:8px 10px;border:1px solid #e0e0e0;text-align:center}
    .matrix-table tr:nth-child(even) td{background:#f8f9ff}
    .matrix-table td.row-label{text-align:left;font-weight:500;color:#333}
    .matrix-table td input{width:16px;height:16px;accent-color:#1565C0}
    .num-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .num-item label{font-size:12px;color:#555;display:block;margin-bottom:4px}
    .num-item input{width:100%;padding:8px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px}
    .meta-box{background:#E8F5E9;border:1px solid #A5D6A7;border-radius:10px;padding:10px 14px;margin-bottom:14px;font-size:12px;color:#2E7D32}
    .btn-submit{width:100%;padding:14px;margin-top:16px;background:linear-gradient(135deg,#1B5E20,#2E7D32);color:white;border:none;border-radius:10px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s}
    .btn-submit:hover{transform:translateY(-2px)}
    .btn-submit:disabled{background:#ccc;cursor:not-allowed;transform:none}
    .status{text-align:center;padding:13px;margin-top:12px;border-radius:10px;display:none;font-size:14px;font-weight:500;white-space:pre-line}
    .status.success{background:#d4edda;color:#155724;display:block}
    .status.error{background:#f8d7da;color:#721c24;display:block}
    .status.loading{background:#d1ecf1;color:#0c5460;display:block}
    .lang-bar{display:flex;gap:10px;margin-bottom:16px;flex-wrap:wrap}
    .lang-btn{padding:9px 20px;border:2px solid #1565C0;border-radius:10px;cursor:pointer;font-size:14px;background:white;color:#1565C0;font-weight:600;transition:all .2s}
    .lang-btn.active{background:#1565C0;color:white}
    #tts-popup{position:fixed;bottom:20px;left:5%;right:5%;background:#0D47A1;color:white;padding:16px 20px;border-radius:14px;font-size:15px;text-align:center;z-index:9999;box-shadow:0 4px 24px rgba(0,0,0,.5);line-height:1.6;display:none;font-weight:500}
    .audio-desc{font-size:11px;color:#1565C0;background:#E3F2FD;border-radius:6px;padding:5px 8px;margin-bottom:8px;display:flex;align-items:center;gap:5px}
    #submit-overlay{display:none;position:fixed;inset:0;background:rgba(13,71,161,0.92);z-index:99999;align-items:center;justify-content:center;flex-direction:column;text-align:center;padding:30px}
    #submit-overlay.visible{display:flex}
    .overlay-spinner{width:64px;height:64px;border:6px solid rgba(255,255,255,0.25);border-top-color:#fff;border-radius:50%;animation:spin 0.9s linear infinite;margin-bottom:24px}
    @keyframes spin{to{transform:rotate(360deg)}}
    .overlay-msg{color:#fff;font-size:18px;font-weight:600;line-height:1.6;margin-bottom:8px}
    .overlay-submsg{color:rgba(255,255,255,0.75);font-size:13px}
    .thankyou-wrap{padding:40px 24px;text-align:center}
    .thankyou-icon{font-size:80px;margin-bottom:12px;line-height:1}
    .thankyou-org{font-size:13px;font-weight:700;color:#1565C0;letter-spacing:1px;text-transform:uppercase;margin-bottom:18px}
    .thankyou-heading{font-size:26px;font-weight:800;color:#1B5E20;margin-bottom:10px}
    .thankyou-card{background:linear-gradient(135deg,#E3F2FD,#BBDEFB);border-radius:16px;padding:20px 24px;margin-bottom:24px}
    .thankyou-card p{font-size:13px;color:#1565C0;line-height:1.8;font-weight:500}
    .thankyou-divider{border:none;border-top:2px dashed #ccc;margin:20px 0}
    .thankyou-footer{font-size:12px;color:#888;line-height:1.7}
    .thankyou-stars{font-size:32px;letter-spacing:6px;margin-top:16px}
    @media(max-width:500px){.dual-input{flex-direction:column}.form-body{padding:16px}.num-grid{grid-template-columns:1fr}}
  </style>
</head>
<body>

<div id="submit-overlay">
  <div class="overlay-spinner" id="overlay-spinner"></div>
  <div class="overlay-msg" id="overlay-msg">â³ Submitting your surveyâ€¦</div>
  <div class="overlay-submsg" id="overlay-submsg">Please wait. Do not close this page.</div>
</div>

<div class="container">
  <div class="header">
    <h1>PROJECT SIVD PHASE I: BASELINE HOUSEHOLD SURVEY</h1>
    <h2>Hand in Hand India</h2>
    <p>Confidential | For Research Purposes Only</p>
  </div>
  <div class="form-body" id="appBody">

    <div id="stepLang">
      <div class="section-title">ğŸŒ Select Language / à®®à¯Šà®´à®¿à®¯à¯ˆ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯</div>
      <div class="lang-bar">
        <button class="lang-btn active" id="btn-lang-en" onclick="selectLang('en-IN')">English</button>
        <button class="lang-btn" id="btn-lang-ta" onclick="selectLang('ta-IN')">à®¤à®®à®¿à®´à¯ (Tamil)</button>
      </div>
      <button class="btn-submit" style="margin-top:0;background:linear-gradient(135deg,#1565C0,#0D47A1)" onclick="showConsent()">â–¶ Continue / à®¤à¯Šà®Ÿà®°à¯à®•</button>
    </div>

    <div id="stepConsent" style="display:none">
      <div class="consent-box">
        <h3 id="consentTitle">ğŸ“œ Informed Consent</h3>
        <button class="consent-audio-btn" id="btn-consent-audio" onclick="toggleConsentAudio()">
          ğŸ”Š <span id="consentAudioLabel">Listen to Consent</span>
        </button>
        <div class="consent-text" id="consentText"></div>
        <div class="audio-desc" id="audioDesc">ğŸ”Š Click the speaker icon to hear. ğŸ¤ Click the microphone icon to record your voice.</div>
        <div class="consent-options">
          <label class="consent-opt" id="consentYesOpt" onclick="selectConsent('yes')">
            <input type="radio" name="consent" value="yes" id="consentYes">
            <span id="consentYesLabel">âœ… Yes, I agree</span>
          </label>
          <label class="consent-opt" id="consentNoOpt" onclick="selectConsent('no')">
            <input type="radio" name="consent" value="no" id="consentNo">
            <span id="consentNoLabel">âŒ No, I do not agree</span>
          </label>
        </div>
      </div>
      <button class="btn-submit" style="margin-top:0;background:linear-gradient(135deg,#1565C0,#0D47A1)" onclick="proceedFromConsent()">â–¶ <span id="consentProceedLabel">Proceed</span></button>
    </div>

    <div id="stepSurvey" style="display:none">
      <div class="meta-box" id="metaBox">ğŸ“ GPS: <span id="gpsDisplay">Capturing...</span> | ğŸ“… Date: <span id="dateDisplay"></span></div>

      <!-- SECTION 0 -->
      <div class="section-block">
        <div class="section-title" id="sec0Title">ğŸ“‹ SECTION 0: METADATA</div>
        <div class="q-block" id="qVillage">
          <div class="q-header">
            <span class="q-number">0.4</span>
            <div style="flex:1"><div class="q-text" id="qVillageText">Village Name</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-village" onclick="speakText(this.dataset.speak||'','btn-audio-village')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-village"></div>
        </div>
      </div>

      <!-- SECTION A -->
      <div class="section-block">
        <div class="section-title" id="secATitle">ğŸ‘¤ SECTION A: SOCIO-DEMOGRAPHIC PROFILE</div>
        <div class="q-block" id="qName">
          <div class="q-header">
            <span class="q-number">A.1</span>
            <div style="flex:1"><div class="q-text" id="qNameText">Name of Respondent</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear. ğŸ¤ Click the microphone icon to record your voice.</div></div>
            <button class="btn-audio" id="btn-audio-name" onclick="speakText(this.dataset.speak||'','btn-audio-name')">ğŸ”Š</button>
          </div>
          <div class="input-row">
            <div class="dual-input">
              <div style="flex:1"><input type="text" id="nameText" placeholder="Type here..."><div class="inp-lbl">âœï¸ Type</div></div>
              <div style="flex:1"><input type="text" id="nameAudio" placeholder="Voice input..." readonly><div class="inp-lbl">ğŸ¤ Voice</div></div>
            </div>
            <button class="btn-mic" id="mic-name" onclick="startMic('name')">ğŸ¤</button>
          </div>
        </div>
        <div class="q-block" id="qCaste">
          <div class="q-header">
            <span class="q-number">A.3</span>
            <div style="flex:1"><div class="q-text" id="qCasteText">Social Category (Caste)</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-caste" onclick="speakText(this.dataset.speak||'','btn-audio-caste')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-caste"></div>
        </div>
        <div class="q-block" id="qHouseType">
          <div class="q-header">
            <span class="q-number">A.4</span>
            <div style="flex:1"><div class="q-text" id="qHouseTypeText">Type of House</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-house" onclick="speakText(this.dataset.speak||'','btn-audio-house')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-house"></div>
        </div>
        <div class="q-block" id="qFamilySize">
          <div class="q-header">
            <span class="q-number">A.5</span>
            <div style="flex:1"><div class="q-text" id="qFamilySizeText">Family Size</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-family" onclick="speakText(this.dataset.speak||'','btn-audio-family')">ğŸ”Š</button>
          </div>
          <div class="num-grid">
            <div class="num-item"><label id="lblMales">Adult Males (18+)</label><input type="number" id="adultMales" min="0" placeholder="0"></div>
            <div class="num-item"><label id="lblFemales">Adult Females (18+)</label><input type="number" id="adultFemales" min="0" placeholder="0"></div>
            <div class="num-item"><label id="lblChildren">Children (0-17)</label><input type="number" id="children" min="0" placeholder="0"></div>
            <div class="num-item"><label id="lblTotal">Total Members</label><input type="number" id="totalMembers" min="0" placeholder="0"></div>
          </div>
        </div>
        <div class="q-block" id="qHasAadhar">
          <div class="q-header">
            <span class="q-number">A.6</span>
            <div style="flex:1"><div class="q-text" id="qHasAadharText">Do you have an Aadhaar card?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-hasaadhar" onclick="speakText(this.dataset.speak||'','btn-audio-hasaadhar')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-hasaadhar"></div>
        </div>
        <div class="q-block hidden" id="qAadharNum">
          <div class="q-header">
            <span class="q-number">A.7</span>
            <div style="flex:1"><div class="q-text" id="qAadharNumText">Aadhaar Number</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear. ğŸ¤ Click the microphone icon to record your voice.</div></div>
            <button class="btn-audio" id="btn-audio-aadhar" onclick="speakText(this.dataset.speak||'','btn-audio-aadhar')">ğŸ”Š</button>
          </div>
          <div class="input-row">
            <div class="dual-input">
              <div style="flex:1"><input type="number" id="aadharText" placeholder="12-digit Aadhaar number" min="0" maxlength="12" oninput="if(this.value.length>12)this.value=this.value.slice(0,12)"><div class="inp-lbl">âœï¸ Type</div></div>
              <div style="flex:1"><input type="text" id="aadharAudio" placeholder="Voice input..." readonly><div class="inp-lbl">ğŸ¤ Voice</div></div>
            </div>
            <button class="btn-mic" id="mic-aadhar" onclick="startMic('aadhar')">ğŸ¤</button>
          </div>
        </div>
      </div>

      <!-- SECTION B -->
      <div class="section-block">
        <div class="section-title" id="secBTitle">ğŸ’¼ SECTION B: LIVELIHOODS & ECONOMIC STATUS</div>
        <div class="q-block" id="qPrimaryIncome">
          <div class="q-header">
            <span class="q-number">B.1</span>
            <div style="flex:1"><div class="q-text" id="qPrimaryIncomeText">Primary Source of Income</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-income" onclick="speakText(this.dataset.speak||'','btn-audio-income')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-income"></div>
        </div>
        <div class="q-block" id="qMonthlyIncome">
          <div class="q-header">
            <span class="q-number">B.2</span>
            <div style="flex:1"><div class="q-text" id="qMonthlyIncomeText">Average Monthly Household Income (Estimate) â€“ INR</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear. ğŸ¤ Click the microphone icon to record your voice.</div></div>
            <button class="btn-audio" id="btn-audio-monthlyincome" onclick="speakText(this.dataset.speak||'','btn-audio-monthlyincome')">ğŸ”Š</button>
          </div>
          <div class="input-row">
            <div class="dual-input">
              <div style="flex:1"><input type="number" id="incomeText" placeholder="e.g. 5000" min="0"><div class="inp-lbl">âœï¸ Type</div></div>
              <div style="flex:1"><input type="text" id="incomeAudio" placeholder="Voice input..." readonly><div class="inp-lbl">ğŸ¤ Voice</div></div>
            </div>
            <button class="btn-mic" id="mic-income" onclick="startMic('income')">ğŸ¤</button>
          </div>
        </div>
        <div class="q-block" id="qRationCard">
          <div class="q-header">
            <span class="q-number">B.3</span>
            <div style="flex:1"><div class="q-text" id="qRationCardText">Ration Card Type</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-ration" onclick="speakText(this.dataset.speak||'','btn-audio-ration')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-ration"></div>
        </div>
        <div class="q-block" id="qHasLoans">
          <div class="q-header">
            <span class="q-number">B.4</span>
            <div style="flex:1"><div class="q-text" id="qHasLoansText">Do you currently have any outstanding loans?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-loans" onclick="speakText(this.dataset.speak||'','btn-audio-loans')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-loans"></div>
        </div>
        <div class="q-block hidden" id="qLoanSource">
          <div class="q-header">
            <span class="q-number">B.4a</span>
            <div style="flex:1"><div class="q-text" id="qLoanSourceText">If Yes: Who did you borrow from? (Select all that apply)</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-loansource" onclick="speakText(this.dataset.speak||'','btn-audio-loansource')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-loansource"></div>
        </div>
        <div class="q-block" id="qMigration">
          <div class="q-header">
            <span class="q-number">B.5</span>
            <div style="flex:1"><div class="q-text" id="qMigrationText">Does any family member live outside the village for work?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-migration" onclick="speakText(this.dataset.speak||'','btn-audio-migration')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-migration"></div>
        </div>
        <div class="q-block hidden" id="qMigrationFreq">
          <div class="q-header">
            <span class="q-number">B.5a</span>
            <div style="flex:1"><div class="q-text" id="qMigrationFreqText">If Yes: Frequency of return?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-migfreq" onclick="speakText(this.dataset.speak||'','btn-audio-migfreq')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-migfreq"></div>
        </div>
        <div class="q-block" id="qSHGMember">
          <div class="q-header">
            <span class="q-number">B.6</span>
            <div style="flex:1"><div class="q-text" id="qSHGMemberText">Are you a member of a Self-Help Group (SHG)?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-shgmember" onclick="speakText(this.dataset.speak||'','btn-audio-shgmember')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-shgmember"></div>
        </div>
      </div>

      <!-- SECTION C -->
      <div class="section-block hidden" id="sectionC">
        <div class="section-title" id="secCTitle">ğŸ‘©â€ğŸ‘©â€ğŸ‘§ SECTION C: WOMEN EMPOWERMENT (SHG STATUS)</div>
        <div class="section-subtitle" id="secCSubtitle">Ask specifically to the female head of household | Skip if not an SHG Member</div>
        <div class="q-block" id="qSHGName">
          <div class="q-header">
            <span class="q-number">C.2</span>
            <div style="flex:1"><div class="q-text" id="qSHGNameText">Name of SHG</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear. ğŸ¤ Click the microphone icon to record your voice.</div></div>
            <button class="btn-audio" id="btn-audio-shgname" onclick="speakText(this.dataset.speak||'','btn-audio-shgname')">ğŸ”Š</button>
          </div>
          <div class="input-row">
            <div class="dual-input">
              <div style="flex:1"><input type="text" id="shgNameText" placeholder="Type SHG name..."><div class="inp-lbl">âœï¸ Type</div></div>
              <div style="flex:1"><input type="text" id="shgNameAudio" placeholder="Voice input..." readonly><div class="inp-lbl">ğŸ¤ Voice</div></div>
            </div>
            <button class="btn-mic" id="mic-shgName" onclick="startMic('shgName')">ğŸ¤</button>
          </div>
        </div>
        <div class="q-block" id="qSHGMeetFreq">
          <div class="q-header">
            <span class="q-number">C.3</span>
            <div style="flex:1"><div class="q-text" id="qSHGMeetFreqText">Frequency of Meetings</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-shgmeet" onclick="speakText(this.dataset.speak||'','btn-audio-shgmeet')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-shgmeet"></div>
        </div>
        <div class="q-block" id="qSHGSaves">
          <div class="q-header">
            <span class="q-number">C.4a</span>
            <div style="flex:1"><div class="q-text" id="qSHGSavesText">Do you save money in the group every month?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-shgsaves" onclick="speakText(this.dataset.speak||'','btn-audio-shgsaves')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-shgsaves"></div>
        </div>
        <div class="q-block" id="qSHGLoan">
          <div class="q-header">
            <span class="q-number">C.4b</span>
            <div style="flex:1"><div class="q-text" id="qSHGLoanText">Have you taken a loan from the SHG in the last 1 year?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-shgloan" onclick="speakText(this.dataset.speak||'','btn-audio-shgloan')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-shgloan"></div>
        </div>
        <div class="q-block hidden" id="qSHGLoanPurpose">
          <div class="q-header">
            <span class="q-number">C.4c</span>
            <div style="flex:1"><div class="q-text" id="qSHGLoanPurposeText">If Yes: Purpose of Loan?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-shgloanpurpose" onclick="speakText(this.dataset.speak||'','btn-audio-shgloanpurpose')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-shgloanpurpose"></div>
        </div>
      </div>

      <!-- SECTION D -->
      <div class="section-block">
        <div class="section-title" id="secDTitle">ğŸ“š SECTION D: EDUCATION & DIGITAL ACCESS</div>
        <div class="section-subtitle" id="secDSubtitle">Ask for every child aged 5-18 years in the household</div>
        <div class="q-block" id="qSchoolMatrix">
          <div class="q-header">
            <span class="q-number">D.1</span>
            <div style="flex:1"><div class="q-text" id="qSchoolMatrixText">Schooling Status (Matrix â€“ Male and Female)</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-school" onclick="speakText(this.dataset.speak||'','btn-audio-school')">ğŸ”Š</button>
          </div>
          <div class="matrix-wrap">
            <table class="matrix-table">
              <thead>
                <tr>
                  <th class="row-header"><span id="matD1Row">Schooling Status</span></th>
                  <th><span id="matD1Male">Male</span> <button class="opt-audio" id="btn-mat-male" onclick="speakText(this.dataset.speak||'','btn-mat-male')">ğŸ”Š</button></th>
                  <th><span id="matD1Female">Female</span> <button class="opt-audio" id="btn-mat-female" onclick="speakText(this.dataset.speak||'','btn-mat-female')">ğŸ”Š</button></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="row-label"><span id="lblEnrolled">Currently Enrolled</span> <button class="opt-audio" id="btn-mat-enrolled" onclick="speakText(this.dataset.speak||'','btn-mat-enrolled')">ğŸ”Š</button></td>
                  <td><input type="number" id="enrolledMale" min="0" placeholder="0" style="width:60px;padding:5px;border:1.5px solid #ccc;border-radius:6px;text-align:center" onchange="checkSchoolConditions()"></td>
                  <td><input type="number" id="enrolledFemale" min="0" placeholder="0" style="width:60px;padding:5px;border:1.5px solid #ccc;border-radius:6px;text-align:center" onchange="checkSchoolConditions()"></td>
                </tr>
                <tr>
                  <td class="row-label"><span id="lblDropout">Drop-out (Stopped Going)</span> <button class="opt-audio" id="btn-mat-dropout" onclick="speakText(this.dataset.speak||'','btn-mat-dropout')">ğŸ”Š</button></td>
                  <td><input type="number" id="dropoutMale" min="0" placeholder="0" style="width:60px;padding:5px;border:1.5px solid #ccc;border-radius:6px;text-align:center" onchange="checkSchoolConditions()"></td>
                  <td><input type="number" id="dropoutFemale" min="0" placeholder="0" style="width:60px;padding:5px;border:1.5px solid #ccc;border-radius:6px;text-align:center" onchange="checkSchoolConditions()"></td>
                </tr>
                <tr>
                  <td class="row-label"><span id="lblNeverEnrolled">Never Enrolled</span> <button class="opt-audio" id="btn-mat-never" onclick="speakText(this.dataset.speak||'','btn-mat-never')">ğŸ”Š</button></td>
                  <td><input type="number" id="neverMale" min="0" placeholder="0" style="width:60px;padding:5px;border:1.5px solid #ccc;border-radius:6px;text-align:center"></td>
                  <td><input type="number" id="neverFemale" min="0" placeholder="0" style="width:60px;padding:5px;border:1.5px solid #ccc;border-radius:6px;text-align:center"></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="q-block hidden" id="qSchoolType">
          <div class="q-header">
            <span class="q-number">D.2</span>
            <div style="flex:1"><div class="q-text" id="qSchoolTypeText">(If Enrolled) Type of School</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-schooltype" onclick="speakText(this.dataset.speak||'','btn-audio-schooltype')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-schooltype"></div>
        </div>
        <div class="q-block hidden" id="qDropoutReason">
          <div class="q-header">
            <span class="q-number">D.3</span>
            <div style="flex:1"><div class="q-text" id="qDropoutReasonText">(If Dropout) Reason for Leaving</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-dropoutreason" onclick="speakText(this.dataset.speak||'','btn-audio-dropoutreason')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-dropoutreason"></div>
        </div>
        <div class="q-block" id="qTravelSchool">
          <div class="q-header">
            <span class="q-number">D.4</span>
            <div style="flex:1"><div class="q-text" id="qTravelSchoolText">Travel to School</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-travelschool" onclick="speakText(this.dataset.speak||'','btn-audio-travelschool')">ğŸ”Š</button>
          </div>
          <div class="section-subtitle" id="lblTravelMode" style="margin-bottom:8px">Mode of Travel:</div>
          <div class="options-list" id="opts-travelmode"></div>
          <div style="margin-top:10px">
            <label id="lblTravelDistance" style="font-size:12px;color:#555;display:block;margin-bottom:4px">Distance to School (km):</label>
            <input type="number" id="schoolDistance" min="0" step="0.1" style="width:160px;padding:8px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px" placeholder="e.g. 2.5">
          </div>
        </div>
        <div class="q-block" id="qTuition">
          <div class="q-header">
            <span class="q-number">D.5a</span>
            <div style="flex:1"><div class="q-text" id="qTuitionText">Does the child go to private tuition?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-tuition" onclick="speakText(this.dataset.speak||'','btn-audio-tuition')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-tuition"></div>
        </div>
        <div class="q-block" id="qLearning">
          <div class="q-header">
            <span class="q-number">D.5b</span>
            <div style="flex:1"><div class="q-text" id="qLearningText">Does the child struggle with Reading/Math?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-learning" onclick="speakText(this.dataset.speak||'','btn-audio-learning')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-learning"></div>
        </div>
        <div class="q-block" id="qSmartphone">
          <div class="q-header">
            <span class="q-number">D.6a</span>
            <div style="flex:1"><div class="q-text" id="qSmartphoneText">Does the child have access to a Smartphone or Computer at home?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-smartphone" onclick="speakText(this.dataset.speak||'','btn-audio-smartphone')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-smartphone"></div>
        </div>
        <div class="q-block" id="qInternet">
          <div class="q-header">
            <span class="q-number">D.6b</span>
            <div style="flex:1"><div class="q-text" id="qInternetText">Can the child use the internet independently?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-internet" onclick="speakText(this.dataset.speak||'','btn-audio-internet')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-internet"></div>
        </div>
      </div>

      <!-- SECTION E -->
      <div class="section-block">
        <div class="section-title" id="secETitle">ğŸ¥ SECTION E: HEALTH, NUTRITION & WASH</div>
        <div class="q-block" id="qWaterSource">
          <div class="q-header">
            <span class="q-number">E.1a</span>
            <div style="flex:1"><div class="q-text" id="qWaterSourceText">Primary Source of Drinking Water</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-watersource" onclick="speakText(this.dataset.speak||'','btn-audio-watersource')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-watersource"></div>
        </div>
        <div class="q-block" id="qWaterTreatment">
          <div class="q-header">
            <span class="q-number">E.1b</span>
            <div style="flex:1"><div class="q-text" id="qWaterTreatmentText">Do you treat water before drinking?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-watertreat" onclick="speakText(this.dataset.speak||'','btn-audio-watertreat')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-watertreat"></div>
        </div>
        <div class="q-block" id="qHasToilet">
          <div class="q-header">
            <span class="q-number">E.2a</span>
            <div style="flex:1"><div class="q-text" id="qHasToiletText">Do you have a toilet in the house?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-toilet" onclick="speakText(this.dataset.speak||'','btn-audio-toilet')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-toilet"></div>
        </div>
        <div class="q-block hidden" id="qToiletUsable">
          <div class="q-header">
            <span class="q-number">E.2b</span>
            <div style="flex:1"><div class="q-text" id="qToiletUsableText">If Yes: Is it currently usable (Clean/Water available)?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-toiletusable" onclick="speakText(this.dataset.speak||'','btn-audio-toiletusable')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-toiletusable"></div>
        </div>
        <div class="q-block hidden" id="qToiletUsers">
          <div class="q-header">
            <span class="q-number">E.2c</span>
            <div style="flex:1"><div class="q-text" id="qToiletUsersText">If Yes: Who uses it?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-toiletusers" onclick="speakText(this.dataset.speak||'','btn-audio-toiletusers')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-toiletusers"></div>
        </div>
        <div class="q-block" id="qMenstrualMaterial">
          <div class="q-header">
            <span class="q-number">E.3a</span>
            <div style="flex:1"><div class="q-text" id="qMenstrualMaterialText">Menstrual Hygiene (Women 15-49): What material do you use?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-menstrual" onclick="speakText(this.dataset.speak||'','btn-audio-menstrual')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-menstrual"></div>
        </div>
        <div class="q-block" id="qMenstrualDisposal">
          <div class="q-header">
            <span class="q-number">E.3b</span>
            <div style="flex:1"><div class="q-text" id="qMenstrualDisposalText">How do you dispose of used materials?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-menstrualdisposal" onclick="speakText(this.dataset.speak||'','btn-audio-menstrualdisposal')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-menstrualdisposal"></div>
        </div>
        <div class="q-block" id="qGreenVeg">
          <div class="q-header">
            <span class="q-number">E.4a</span>
            <div style="flex:1"><div class="q-text" id="qGreenVegText">How often does the family eat Green Leafy Vegetables?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-greenveg" onclick="speakText(this.dataset.speak||'','btn-audio-greenveg')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-greenveg"></div>
        </div>
        <div class="q-block" id="qMilkFreq">
          <div class="q-header">
            <span class="q-number">E.4b</span>
            <div style="flex:1"><div class="q-text" id="qMilkFreqText">How often does the family consume Milk/Curd?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-milkfreq" onclick="speakText(this.dataset.speak||'','btn-audio-milkfreq')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-milkfreq"></div>
        </div>
        <div class="q-block" id="qNCDMatrix">
          <div class="q-header">
            <span class="q-number">E.5</span>
            <div style="flex:1"><div class="q-text" id="qNCDMatrixText">Has a doctor told anyone in the family they have: (Number of people for Male and Female separately)</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-ncd" onclick="speakText(this.dataset.speak||'','btn-audio-ncd')">ğŸ”Š</button>
          </div>
          <div class="matrix-wrap">
            <table class="matrix-table">
              <thead>
                <tr>
                  <th class="row-header" id="ncdCondHeader">Health Condition</th>
                  <th><span id="ncdMaleHeader">Male</span> <button class="opt-audio" id="btn-ncd-male" onclick="speakText(T[lang].d.male,'btn-ncd-male')">ğŸ”Š</button></th>
                  <th><span id="ncdFemaleHeader">Female</span> <button class="opt-audio" id="btn-ncd-female" onclick="speakText(T[lang].d.female,'btn-ncd-female')">ğŸ”Š</button></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="row-label"><span id="lblBP">High Blood Pressure (BP)</span> <button class="opt-audio" id="btn-ncd-bp" onclick="speakText(T[lang].e.bp,'btn-ncd-bp')">ğŸ”Š</button></td>
                  <td><input type="number" id="bpMale" min="0" placeholder="0" style="width:60px;padding:5px;border:1.5px solid #ccc;border-radius:6px;text-align:center"></td>
                  <td><input type="number" id="bpFemale" min="0" placeholder="0" style="width:60px;padding:5px;border:1.5px solid #ccc;border-radius:6px;text-align:center"></td>
                </tr>
                <tr>
                  <td class="row-label"><span id="lblDiabetes">Diabetes (Sugar)</span> <button class="opt-audio" id="btn-ncd-diabetes" onclick="speakText(T[lang].e.diabetes,'btn-ncd-diabetes')">ğŸ”Š</button></td>
                  <td><input type="number" id="diabetesMale" min="0" placeholder="0" style="width:60px;padding:5px;border:1.5px solid #ccc;border-radius:6px;text-align:center"></td>
                  <td><input type="number" id="diabetesFemale" min="0" placeholder="0" style="width:60px;padding:5px;border:1.5px solid #ccc;border-radius:6px;text-align:center"></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- SECTION F -->
      <div class="section-block">
        <div class="section-title" id="secFTitle">ğŸ—‘ï¸ SECTION F: WASTE MANAGEMENT (SWM)</div>
        <div class="q-block" id="qWasteSegregation">
          <div class="q-header">
            <span class="q-number">F.1</span>
            <div style="flex:1"><div class="q-text" id="qWasteSegText">Do you separate wet waste (food) and dry waste (plastic) at home?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-wasteseg" onclick="speakText(this.dataset.speak||'','btn-audio-wasteseg')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-wasteseg"></div>
        </div>
        <div class="q-block" id="qWetWaste">
          <div class="q-header">
            <span class="q-number">F.2</span>
            <div style="flex:1"><div class="q-text" id="qWetWasteText">Disposal Method â€“ Wet Waste</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-wetwaste" onclick="speakText(this.dataset.speak||'','btn-audio-wetwaste')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-wetwaste"></div>
        </div>
        <div class="q-block" id="qDryWaste">
          <div class="q-header">
            <span class="q-number">F.3</span>
            <div style="flex:1"><div class="q-text" id="qDryWasteText">Disposal Method â€“ Dry Waste</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-drywaste" onclick="speakText(this.dataset.speak||'','btn-audio-drywaste')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-drywaste"></div>
        </div>
        <div class="q-block" id="qWasteCollector">
          <div class="q-header">
            <span class="q-number">F.4</span>
            <div style="flex:1"><div class="q-text" id="qWasteCollectorText">Does the waste collector (Thooimaikavalar) come to your door?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-wastecollect" onclick="speakText(this.dataset.speak||'','btn-audio-wastecollect')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-wastecollect"></div>
        </div>
      </div>

      <!-- SECTION G -->
      <div class="section-block">
        <div class="section-title" id="secGTitle">ğŸŒ¾ SECTION G: AGRICULTURE & LIVESTOCK (NRM)</div>
        <div class="q-block" id="qOwnsLand">
          <div class="q-header">
            <span class="q-number">G.1</span>
            <div style="flex:1"><div class="q-text" id="qOwnsLandText">Do you own agricultural land?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-land" onclick="speakText(this.dataset.speak||'','btn-audio-land')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-land"></div>
        </div>
        <div class="q-block hidden" id="qLandAcres">
          <div class="q-header">
            <span class="q-number">G.1a</span>
            <div style="flex:1"><div class="q-text" id="qLandAcresText">If Yes: How many Acres?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-acres" onclick="speakText(this.dataset.speak||'','btn-audio-acres')">ğŸ”Š</button>
          </div>
          <input type="number" id="landAcres" min="0" step="0.1" style="width:160px;padding:8px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px" placeholder="e.g. 2.5">
        </div>
        <div class="q-block" id="qMilchAnimals">
          <div class="q-header">
            <span class="q-number">G.2a</span>
            <div style="flex:1"><div class="q-text" id="qMilchAnimalsText">Do you own Milch Animals (Cows/Buffaloes)?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-milch" onclick="speakText(this.dataset.speak||'','btn-audio-milch')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-milch"></div>
        </div>
        <div class="q-block hidden" id="qMilchCount">
          <div class="q-header">
            <span class="q-number">G.2b</span>
            <div style="flex:1"><div class="q-text" id="qMilchCountText">If Yes: Total Count of Milch Animals</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-milchcount" onclick="speakText(this.dataset.speak||'','btn-audio-milchcount')">ğŸ”Š</button>
          </div>
          <input type="number" id="milchCount" min="0" style="width:160px;padding:8px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px" placeholder="0" onchange="checkMilchCountCondition()">
        </div>
        <div class="q-block hidden" id="qMilkYield">
          <div class="q-header">
            <span class="q-number">G.2c</span>
            <div style="flex:1"><div class="q-text" id="qMilkYieldText">If Yes: Daily Milk Yield (Total Liters)</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-milkyield" onclick="speakText(this.dataset.speak||'','btn-audio-milkyield')">ğŸ”Š</button>
          </div>
          <input type="number" id="milkYield" min="0" step="0.1" style="width:160px;padding:8px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px" placeholder="0.0">
        </div>
        <div class="q-block" id="qFodder">
          <div class="q-header">
            <span class="q-number">G.3</span>
            <div style="flex:1"><div class="q-text" id="qFodderText">Do you face fodder shortage in summer?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-fodder" onclick="speakText(this.dataset.speak||'','btn-audio-fodder')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-fodder"></div>
        </div>
        <div class="q-block" id="qCropWater">
          <div class="q-header">
            <span class="q-number">G.4</span>
            <div style="flex:1"><div class="q-text" id="qCropWaterText">Has your crop suffered due to water shortage in the last 2 years?</div><div class="q-audio-hint">ğŸ”Š Click the speaker icon to hear.</div></div>
            <button class="btn-audio" id="btn-audio-cropwater" onclick="speakText(this.dataset.speak||'','btn-audio-cropwater')">ğŸ”Š</button>
          </div>
          <div class="options-list" id="opts-cropwater"></div>
        </div>
      </div>

      <button class="btn-submit" id="submitBtn" onclick="submitForm()">âœ… Submit Survey</button>
      <div class="status" id="status"></div>
    </div>
  </div>
</div>
<div id="tts-popup"></div>

<script>
// ================================================================
//  GOOGLE APPS SCRIPT WEB APP URL
//  âœ… This sends form data directly to your Google Sheet
// ================================================================
var GAS_URL = 'https://script.google.com/macros/s/AKfycbzvabPi4mRuYAHgDMdEy_yv9NS7Qkpr-8c7zAB6zIaft1bTk6nXCpcWLwoKwR7M9B2J6Q/exec';

// ================================================================
//  TRANSLATIONS OBJECT (English + Tamil)
// ================================================================
var T = {
  "en-IN": {
    consent: {
      title: "Informed Consent",
      text: "Namaste. I am from Hand in Hand India. We are conducting a survey to understand the needs of your village and to plan development and livelihood projects.\n\nYour answers will be kept private and used only for project planning, documentation, and improvement of our programs. Participation in this survey is completely voluntary. You may choose not to answer any question or stop the survey at any time.\n\nIn this survey, we may also request your Aadhaar number for identification and official project documentation purposes only. Your Aadhaar information will be stored securely and will not be shared with unauthorized persons. Providing your Aadhaar details is voluntary, and you may choose not to provide them.\n\nDo you voluntarily agree to participate in this survey and provide the required information?",
      yes: "âœ… Yes, I agree",
      no: "âŒ No, I do not agree",
      proceed: "Proceed",
      declined: "Thank you. The survey has been ended as per your choice."
    },
    q: { villageName: "What is the name of your village?" },
    villageOpts: ["Ramanujapuram", "Melmadhuramangalam", "Singilipadi"],
    a: { name: "Name of Respondent", caste: "Social Category, Caste", houseType: "Type of House", familySize: "Family Size", hasAadhar: "Do you have an Aadhaar card?", aadharNum: "Aadhaar Number" },
    aOpts: {
      caste: ["SC (Scheduled Caste)", "ST (Scheduled Tribe)", "MBC (Most Backward Class)", "BC (Backward Class)", "OC (Other Category)"],
      houseType: ["Kutcha (Mud/Thatched)", "Semi-Pucca (Tiled/Asbestos)", "Pucca (Concrete/Terrace)"],
      yesNo: ["Yes", "No"]
    },
    b: { primaryIncome: "Primary Source of Income", monthlyIncome: "Average Monthly Household Income, in Rupees", rationCard: "Ration Card Type", hasLoans: "Do you have any outstanding loans?", loanSource: "Who did you borrow from?", migration: "Does any family member live outside the village for work?", migrationFreq: "Frequency of return?", shgMember: "Are you a member of a Self-Help Group, SHG?" },
    bOpts: {
      primaryIncome: ["Agriculture (Own Farm)", "Agricultural Labor (Daily Wage)", "Non-Agri Labor (Construction/MGNREGA)", "Salaried / Private Job", "Self-Employed / Business", "Pension / Govt Support"],
      rationCard: ["AAY (Green/Antyodaya) - Poorest", "PHH (Priority/BPL)", "NPHH (Non-Priority/APL)"],
      loanSource: ["Bank", "SHG", "MFI (Microfinance)", "Money Lender", "Relative"],
      migrationFreq: ["Daily", "Weekly", "Monthly", "Yearly"],
      yesNo: ["Yes", "No"]
    },
    c: { shgName: "Name of SHG", meetFreq: "Frequency of Meetings", shgSaves: "Do you save money in the group every month?", shgLoan: "Have you taken a loan from the SHG in the last one year?", shgLoanPurpose: "Purpose of Loan" },
    cOpts: {
      meetFreq: ["Weekly", "Monthly", "Irregular / Rarely", "Not Meeting (Dormant)"],
      shgLoanPurpose: ["Consumption / Daily Needs", "Health / Medical", "Education", "Business / Enterprise"],
      yesNo: ["Yes", "No"]
    },
    d: { schoolStatus: "Schooling Status, Male and Female", male: "Male", female: "Female", enrolled: "Currently Enrolled", dropout: "Drop-out, Stopped Going", neverEnrolled: "Never Enrolled", schoolType: "Type of School", dropoutReason: "Reason for Leaving school", travelSchool: "Travel to School, Mode and Distance", tuition: "Does the child go to private tuition?", learning: "Does the child struggle with Reading or Math?", smartphone: "Does the child have access to a Smartphone or Computer?", internet: "Can the child use the internet independently?" },
    dOpts: {
      schoolType: ["Govt (Government)", "Govt Aided (Government Aided)", "Private"],
      dropoutReason: ["Failed / Not interested in studies", "Financial constraints / Fees", "School is too far / Transport issue", "Needed for work / Sibling care", "Health issues"],
      travelMode: ["Walk", "Bicycle", "Bus", "Parent Drops"],
      yesNo: ["Yes", "No"],
      yesNoDK: ["Yes", "No", "Don't Know"]
    },
    e: { waterSource: "Primary Source of Drinking Water", waterTreatment: "Do you treat water before drinking?", hasToilet: "Do you have a toilet in the house?", toiletUsable: "Is the toilet currently usable?", toiletUsers: "Who uses the toilet?", menstrualMaterial: "Menstrual Hygiene, what material do you use?", menstrualDisposal: "How do you dispose of used materials?", greenVeg: "How often does the family eat Green Leafy Vegetables?", milkFreq: "How often does the family consume Milk or Curd?", ncdMatrix: "Has a doctor diagnosed anyone in the family with these conditions?", bp: "High Blood Pressure, BP", diabetes: "Diabetes, Sugar" },
    eOpts: {
      waterSource: ["Piped to House", "Public Tap", "RO Plant", "Open Well"],
      waterTreatment: ["Boil", "Filter", "Cloth", "None / No treatment"],
      toiletUsers: ["Everyone", "Women only", "Elderly only", "No one uses it"],
      menstrualMaterial: ["Sanitary Napkin", "Cloth", "Both"],
      menstrualDisposal: ["Dustbin", "Burn", "Bury", "Throw in open", "Incinerator"],
      dietFreq: ["Daily", "2-3 times a week", "Rarely"],
      yesNo: ["Yes", "No"]
    },
    f: { segregation: "Do you separate wet and dry waste at home?", wetWaste: "Disposal Method, Wet Waste", dryWaste: "Disposal Method, Dry Waste", collector: "Does the waste collector come to your door?" },
    fOpts: {
      segregation: ["Always", "Sometimes", "Never"],
      wetWaste: ["Give to collector (Green Bin)", "Feed to cattle", "Backyard Compost", "Throw on street/drain"],
      dryWaste: ["Give to collector (Red Bin)", "Burn", "Sell to scrap dealer", "Throw on street/drain"],
      collector: ["Daily", "Weekly", "Irregular", "Never"]
    },
    g: { ownsLand: "Do you own agricultural land?", landAcres: "How many Acres?", milchAnimals: "Do you own Milch Animals, Cows or Buffaloes?", milchCount: "Total Count of Milch Animals", milkYield: "Daily Milk Yield in Liters", fodder: "Do you face fodder shortage in summer?", cropWater: "Has your crop suffered due to water shortage in the last 2 years?" },
    gOpts: { yesNo: ["Yes", "No"] }
  },
  "ta-IN": {
    consent: {
      title: "à®¤à®•à®µà®²à¯ à®šà®®à¯à®®à®¤à®®à¯",
      text: "à®µà®£à®•à¯à®•à®®à¯. à®¨à®¾à®©à¯ à®¹à¯‡à®£à¯à®Ÿà¯ à®‡à®©à¯ à®¹à¯‡à®£à¯à®Ÿà¯ à®‡à®¨à¯à®¤à®¿à®¯à®¾ à®¨à®¿à®±à¯à®µà®©à®¤à¯à®¤à®¿à®²à®¿à®°à¯à®¨à¯à®¤à¯ à®µà®°à¯à®•à®¿à®±à¯‡à®©à¯. à®‰à®™à¯à®•à®³à¯ à®•à®¿à®°à®¾à®®à®¤à¯à®¤à®¿à®©à¯ à®¤à¯‡à®µà¯ˆà®•à®³à¯ˆ à®ªà¯à®°à®¿à®¨à¯à®¤à¯à®•à¯Šà®³à¯à®³à®µà¯à®®à¯, à®µà®³à®°à¯à®šà¯à®šà®¿ à®®à®±à¯à®±à¯à®®à¯ à®µà®¾à®´à¯à®µà®¾à®¤à®¾à®° à®¤à®¿à®Ÿà¯à®Ÿà®™à¯à®•à®³à¯ˆ à®¤à®¿à®Ÿà¯à®Ÿà®®à®¿à®Ÿà®µà¯à®®à¯ à®¨à®¾à®™à¯à®•à®³à¯ à®’à®°à¯ à®•à®£à®•à¯à®•à¯†à®Ÿà¯à®ªà¯à®ªà¯ à®¨à®Ÿà®¤à¯à®¤à¯à®•à®¿à®±à¯‹à®®à¯.\n\nà®‰à®™à¯à®•à®³à¯ à®ªà®¤à®¿à®²à¯à®•à®³à¯ à®¤à®©à®¿à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à®¾à®• à®µà¯ˆà®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®®à¯, à®¤à®¿à®Ÿà¯à®Ÿ à®¤à®¿à®Ÿà¯à®Ÿà®®à®¿à®Ÿà®²à¯, à®†à®µà®£à®ªà¯à®ªà®Ÿà¯à®¤à¯à®¤à®²à¯ à®®à®±à¯à®±à¯à®®à¯ à®¨à®¿à®°à®²à¯à®•à®³à¯ˆ à®®à¯‡à®®à¯à®ªà®Ÿà¯à®¤à¯à®¤à¯à®µà®¤à®±à¯à®•à¯ à®®à®Ÿà¯à®Ÿà¯à®®à¯‡ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à®ªà¯à®ªà®Ÿà¯à®®à¯. à®‡à®¨à¯à®¤ à®•à®£à®•à¯à®•à¯†à®Ÿà¯à®ªà¯à®ªà®¿à®²à¯ à®ªà®™à¯à®•à¯‡à®±à¯à®ªà®¤à¯ à®®à¯à®±à¯à®±à®¿à®²à¯à®®à¯ à®¤à®©à¯à®©à®¾à®°à¯à®µà®®à®¾à®©à®¤à¯. à®¨à¯€à®™à¯à®•à®³à¯ à®à®¨à¯à®¤ à®•à¯‡à®³à¯à®µà®¿à®•à¯à®•à¯à®®à¯ à®ªà®¤à®¿à®²à¯ à®šà¯Šà®²à¯à®² à®®à®±à¯à®•à¯à®•à®²à®¾à®®à¯ à®…à®²à¯à®²à®¤à¯ à®à®¨à¯à®¤ à®¨à¯‡à®°à®¤à¯à®¤à®¿à®²à¯à®®à¯ à®•à®£à®•à¯à®•à¯†à®Ÿà¯à®ªà¯à®ªà¯ˆ à®¨à®¿à®±à¯à®¤à¯à®¤à®²à®¾à®®à¯.\n\nà®•à®£à®•à¯à®•à¯†à®Ÿà¯à®ªà¯à®ªà®¿à®²à¯ à®…à®Ÿà¯ˆà®¯à®¾à®³à®®à¯ à®•à®¾à®£à®µà¯à®®à¯ à®¤à®¿à®Ÿà¯à®Ÿ à®†à®µà®£à®™à¯à®•à®³à¯à®•à¯à®•à®¾à®•à®µà¯à®®à¯ à®†à®¤à®¾à®°à¯ à®à®£à¯ à®•à¯‡à®Ÿà¯à®•à®ªà¯à®ªà®Ÿà®²à®¾à®®à¯. à®‰à®™à¯à®•à®³à¯ à®†à®¤à®¾à®°à¯ à®¤à®•à®µà®²à¯ à®ªà®¾à®¤à¯à®•à®¾à®ªà¯à®ªà®¾à®• à®šà¯‡à®®à®¿à®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®®à¯. à®…à®¤à¯ˆ à®µà®´à®™à¯à®•à¯à®µà®¤à¯ à®¤à®©à¯à®©à®¾à®°à¯à®µà®®à®¾à®©à®¤à¯.\n\nà®¨à¯€à®™à¯à®•à®³à¯ à®¤à®©à¯à®©à®¾à®°à¯à®µà®®à®¾à®• à®‡à®¨à¯à®¤ à®•à®£à®•à¯à®•à¯†à®Ÿà¯à®ªà¯à®ªà®¿à®²à¯ à®ªà®™à¯à®•à¯‡à®±à¯à®• à®šà®®à¯à®®à®¤à®¿à®•à¯à®•à®¿à®±à¯€à®°à¯à®•à®³à®¾?",
      yes: "âœ… à®†à®®à¯, à®¨à®¾à®©à¯ à®šà®®à¯à®®à®¤à®¿à®•à¯à®•à®¿à®±à¯‡à®©à¯",
      no: "âŒ à®‡à®²à¯à®²à¯ˆ, à®¨à®¾à®©à¯ à®šà®®à¯à®®à®¤à®¿à®•à¯à®•à®µà®¿à®²à¯à®²à¯ˆ",
      proceed: "à®¤à¯Šà®Ÿà®°à¯à®•",
      declined: "à®¨à®©à¯à®±à®¿. à®‰à®™à¯à®•à®³à¯ à®µà®¿à®°à¯à®ªà¯à®ªà®¤à¯à®¤à®¿à®±à¯à®•à¯ à®‡à®£à®™à¯à®• à®•à®£à®•à¯à®•à¯†à®Ÿà¯à®ªà¯à®ªà¯ à®®à¯à®Ÿà®¿à®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯."
    },
    q: { villageName: "à®‰à®™à¯à®•à®³à¯ à®•à®¿à®°à®¾à®®à®¤à¯à®¤à®¿à®©à¯ à®ªà¯†à®¯à®°à¯ à®à®©à¯à®©?" },
    villageOpts: ["à®°à®¾à®®à®¾à®©à¯à®œà®ªà¯à®°à®®à¯", "à®®à¯‡à®²à¯à®®à®¤à¯à®°à®®à®™à¯à®•à®²à®®à¯", "à®šà®¿à®™à¯à®•à®¿à®²à®¿à®ªà®¾à®Ÿà®¿"],
    a: { name: "à®ªà®¤à®¿à®²à®³à®¿à®ªà¯à®ªà®µà®°à®¿à®©à¯ à®ªà¯†à®¯à®°à¯", caste: "à®šà®®à¯‚à®• à®µà®•à¯ˆ, à®šà®¾à®¤à®¿", houseType: "à®µà¯€à®Ÿà¯à®Ÿà®¿à®©à¯ à®µà®•à¯ˆ", familySize: "à®•à¯à®Ÿà¯à®®à¯à®ª à®…à®³à®µà¯", hasAadhar: "à®‰à®™à¯à®•à®³à®¿à®Ÿà®®à¯ à®†à®¤à®¾à®°à¯ à®…à®Ÿà¯à®Ÿà¯ˆ à®‡à®°à¯à®•à¯à®•à®¿à®±à®¤à®¾?", aadharNum: "à®†à®¤à®¾à®°à¯ à®à®£à¯" },
    aOpts: {
      caste: ["SC (à®¤à®¾à®´à¯à®¤à¯à®¤à®ªà¯à®ªà®Ÿà¯à®Ÿ à®šà®¾à®¤à®¿)", "ST (à®ªà®´à®™à¯à®•à¯à®Ÿà®¿à®¯à®¿à®©à®°à¯)", "MBC (à®®à®¿à®•à®µà¯à®®à¯ à®ªà®¿à®±à¯à®ªà®Ÿà¯à®¤à¯à®¤à®ªà¯à®ªà®Ÿà¯à®Ÿà®µà®°à¯à®•à®³à¯)", "BC (à®ªà®¿à®±à¯à®ªà®Ÿà¯à®¤à¯à®¤à®ªà¯à®ªà®Ÿà¯à®Ÿà®µà®°à¯à®•à®³à¯)", "OC (à®ªà¯Šà®¤à¯ à®µà®•à¯ˆ)"],
      houseType: ["à®•à¯à®Ÿà®¿à®šà¯ˆ à®µà¯€à®Ÿà¯ (à®®à®£à¯/à®•à¯‚à®°à¯ˆ)", "à®“à®Ÿà¯ à®µà¯€à®Ÿà¯", "à®•à®¾à®©à¯à®•à®¿à®°à¯€à®Ÿà¯/à®®à®¾à®Ÿà®¿ à®µà¯€à®Ÿà¯"],
      yesNo: ["à®†à®®à¯", "à®‡à®²à¯à®²à¯ˆ"]
    },
    b: { primaryIncome: "à®®à¯à®¤à®©à¯à®®à¯ˆ à®µà®°à¯à®®à®¾à®© à®†à®¤à®¾à®°à®®à¯", monthlyIncome: "à®šà®°à®¾à®šà®°à®¿ à®®à®¾à®¤à®¾à®¨à¯à®¤à®¿à®° à®µà®°à¯à®®à®¾à®©à®®à¯, à®°à¯‚à®ªà®¾à®¯à®¿à®²à¯", rationCard: "à®°à¯‡à®·à®©à¯ à®…à®Ÿà¯à®Ÿà¯ˆ à®µà®•à¯ˆ", hasLoans: "à®¨à®¿à®²à¯à®µà¯ˆà®¯à®¿à®²à¯ à®•à®Ÿà®©à¯à®•à®³à¯ à®‰à®³à¯à®³à®©à®µà®¾?", loanSource: "à®¯à®¾à®°à®¿à®Ÿà®®à¯ à®•à®Ÿà®©à¯ à®µà®¾à®™à¯à®•à®¿à®©à¯€à®°à¯à®•à®³à¯?", migration: "à®•à¯à®Ÿà¯à®®à¯à®ªà®¤à¯à®¤à®¿à®²à¯ à®¯à®¾à®°à®¾à®µà®¤à¯ à®µà¯‡à®²à¯ˆà®•à¯à®•à®¾à®• à®•à®¿à®°à®¾à®®à®¤à¯à®¤à¯à®•à¯à®•à¯ à®µà¯†à®³à®¿à®¯à¯‡ à®‡à®°à¯à®•à¯à®•à®¿à®±à®¾à®°à¯à®•à®³à®¾?", migrationFreq: "à®à®µà¯à®µà®³à®µà¯ à®¤à®Ÿà®µà¯ˆ à®µà¯€à®Ÿà¯à®Ÿà®¿à®±à¯à®•à¯ à®µà®°à¯à®•à®¿à®±à®¾à®°à¯à®•à®³à¯?", shgMember: "à®¨à¯€à®™à¯à®•à®³à¯ à®šà¯à®¯ à®‰à®¤à®µà®¿ à®•à¯à®´à¯ à®‰à®±à¯à®ªà¯à®ªà®¿à®©à®°à®¾?" },
    bOpts: {
      primaryIncome: ["à®µà®¿à®µà®šà®¾à®¯à®®à¯ (à®šà¯Šà®¨à¯à®¤ à®¨à®¿à®²à®®à¯)", "à®µà®¿à®µà®šà®¾à®¯ à®•à¯‚à®²à®¿ (à®¤à®¿à®©à®•à¯ à®•à¯‚à®²à®¿)", "à®•à®Ÿà¯à®Ÿà®¿à®Ÿ/MGNREGA à®µà¯‡à®²à¯ˆ", "à®Šà®¤à®¿à®¯à®®à¯ / à®¤à®©à®¿à®¯à®¾à®°à¯ à®µà¯‡à®²à¯ˆ", "à®šà¯Šà®¨à¯à®¤ à®¤à¯Šà®´à®¿à®²à¯", "à®“à®¯à¯à®µà¯‚à®¤à®¿à®¯à®®à¯ / à®…à®°à®šà¯ à®‰à®¤à®µà®¿"],
      rationCard: ["AAY (à®ªà®šà¯à®šà¯ˆ à®…à®Ÿà¯à®Ÿà¯ˆ/à®…à®¨à¯à®¤à®¿à®¯à¯‹à®¤à®¯)", "PHH (à®®à¯à®©à¯à®©à¯à®°à®¿à®®à¯ˆ/BPL)", "NPHH (à®®à¯à®©à¯à®©à¯à®°à®¿à®®à¯ˆ à®‡à®²à¯à®²à®¾/APL)"],
      loanSource: ["à®µà®™à¯à®•à®¿", "SHG", "MFI (à®¨à¯à®£à¯à®•à®Ÿà®©à¯)", "à®¤à®©à®¿à®¯à®¾à®°à¯ à®•à®Ÿà®©à¯à®•à®¾à®°à®°à¯", "à®‰à®±à®µà®¿à®©à®°à¯"],
      migrationFreq: ["à®¤à®¿à®©à®®à¯à®®à¯", "à®µà®¾à®°à®®à¯ à®’à®°à¯à®®à¯à®±à¯ˆ", "à®®à®¾à®¤à®®à¯ à®’à®°à¯à®®à¯à®±à¯ˆ", "à®µà®°à¯à®Ÿà®®à¯ à®’à®°à¯à®®à¯à®±à¯ˆ"],
      yesNo: ["à®†à®®à¯", "à®‡à®²à¯à®²à¯ˆ"]
    },
    c: { shgName: "à®šà¯à®¯ à®‰à®¤à®µà®¿ à®•à¯à®´à¯ (SHG) à®ªà¯†à®¯à®°à¯", meetFreq: "à®•à¯‚à®Ÿà¯à®Ÿà®®à¯ à®¨à®Ÿà¯ˆà®ªà¯†à®±à¯à®®à¯ à®•à®¾à®²à®®à¯:", shgSaves: "à®’à®µà¯à®µà¯Šà®°à¯ à®®à®¾à®¤à®®à¯à®®à¯ à®•à¯à®´à¯à®µà®¿à®²à¯ à®šà¯‡à®®à®¿à®•à¯à®•à®¿à®±à¯€à®°à¯à®•à®³à®¾?", shgLoan: "à®•à®Ÿà®¨à¯à®¤ à®’à®°à¯ à®µà®°à¯à®Ÿà®¤à¯à®¤à®¿à®²à¯ SHG à®•à®Ÿà®©à¯ à®µà®¾à®™à¯à®•à®¿à®©à¯€à®°à¯à®•à®³à®¾?", shgLoanPurpose: "à®•à®Ÿà®©à¯ à®µà®¾à®™à¯à®•à®¿à®¯à®¤à®©à¯ à®¨à¯‹à®•à¯à®•à®®à¯" },
    cOpts: {
      meetFreq: ["à®µà®¾à®°à®®à¯ à®’à®°à¯à®®à¯à®±à¯ˆ", "à®®à®¾à®¤à®®à¯ à®’à®°à¯à®®à¯à®±à¯ˆ", "à®’à®´à¯à®™à¯à®•à®±à¯à®± à®®à¯à®±à¯ˆà®¯à®¿à®²à¯", "à®šà®¨à¯à®¤à®¿à®ªà¯à®ªà®¿à®²à¯à®²à¯ˆ (à®šà¯†à®¯à®²à®¿à®´à®¨à¯à®¤)"],
      shgLoanPurpose: ["à®¨à¯à®•à®°à¯à®µà¯ / à®…à®©à¯à®±à®¾à®Ÿ à®¤à¯‡à®µà¯ˆ", "à®‰à®Ÿà®²à¯à®¨à®²à®®à¯ / à®®à®°à¯à®¤à¯à®¤à¯à®µà®®à¯", "à®•à®²à¯à®µà®¿", "à®¤à¯Šà®´à®¿à®²à¯ / à®¨à®¿à®±à¯à®µà®©à®®à¯"],
      yesNo: ["à®†à®®à¯", "à®‡à®²à¯à®²à¯ˆ"]
    },
    d: { schoolStatus: "à®•à®²à¯à®µà®¿ à®¨à®¿à®²à¯ˆ, à®†à®£à¯ à®®à®±à¯à®±à¯à®®à¯ à®ªà¯†à®£à¯", male: "à®†à®£à¯", female: "à®ªà¯†à®£à¯", enrolled: "à®¤à®±à¯à®ªà¯‹à®¤à¯ à®ªà®³à¯à®³à®¿à®¯à®¿à®²à¯ à®ªà®Ÿà®¿à®•à¯à®•à®¿à®±à®¾à®°à¯", dropout: "à®ªà®Ÿà®¿à®ªà¯à®ªà¯ˆ à®‡à®Ÿà¯ˆà®¯à®¿à®²à¯ à®¨à®¿à®±à¯à®¤à¯à®¤à®¿à®©à®¾à®°à¯", neverEnrolled: "à®à®ªà¯à®ªà¯‹à®¤à¯à®®à¯ à®ªà®³à¯à®³à®¿à®•à¯à®•à¯ à®šà¯‡à®°à¯à®•à¯à®•à®ªà¯à®ªà®Ÿà®µà®¿à®²à¯à®²à¯ˆ", schoolType: "à®ªà®³à¯à®³à®¿ à®µà®•à¯ˆ", dropoutReason: "à®ªà®³à¯à®³à®¿ à®µà®¿à®Ÿà¯à®Ÿ à®•à®¾à®°à®£à®®à¯", travelSchool: "à®ªà®³à¯à®³à®¿à®•à¯à®•à¯ à®ªà®¯à®£ à®®à¯à®±à¯ˆ à®®à®±à¯à®±à¯à®®à¯ à®¤à¯‚à®°à®®à¯", tuition: "à®•à¯à®´à®¨à¯à®¤à¯ˆ à®¤à®©à®¿à®¯à®¾à®°à¯ à®Ÿà¯à®¯à¯‚à®·à®©à¯à®•à¯à®•à¯ à®šà¯†à®²à¯à®•à®¿à®±à®¤à®¾?", learning: "à®•à¯à®´à®¨à¯à®¤à¯ˆà®•à¯à®•à¯ à®ªà®Ÿà®¿à®•à¯à®• à®…à®²à¯à®²à®¤à¯ à®•à®£à®•à¯à®•à®¿à®²à¯ à®šà®¿à®°à®®à®®à¯ à®‰à®³à¯à®³à®¤à®¾?", smartphone: "à®µà¯€à®Ÿà¯à®Ÿà®¿à®²à¯ à®¸à¯à®®à®¾à®°à¯à®Ÿà¯à®ªà¯‹à®©à¯ à®…à®²à¯à®²à®¤à¯ à®•à®£à®¿à®©à®¿ à®µà®šà®¤à®¿ à®‰à®³à¯à®³à®¤à®¾?", internet: "à®•à¯à®´à®¨à¯à®¤à¯ˆ à®šà¯à®¤à®¨à¯à®¤à®¿à®°à®®à®¾à®• à®‡à®£à¯ˆà®¯à®®à¯ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤ à®®à¯à®Ÿà®¿à®¯à¯à®®à®¾?" },
    dOpts: {
      schoolType: ["à®…à®°à®šà¯ à®ªà®³à¯à®³à®¿", "à®…à®°à®šà¯ à®‰à®¤à®µà®¿ à®ªà¯†à®±à¯à®®à¯ à®ªà®³à¯à®³à®¿", "à®¤à®©à®¿à®¯à®¾à®°à¯ à®ªà®³à¯à®³à®¿"],
      dropoutReason: ["à®¤à¯‹à®²à¯à®µà®¿ / à®ªà®Ÿà®¿à®ªà¯à®ªà®¿à®²à¯ à®†à®°à¯à®µà®®à®¿à®²à¯à®²à¯ˆ", "à®¨à®¿à®¤à®¿ à®šà®¿à®°à®®à®®à¯ / à®•à®Ÿà¯à®Ÿà®£à®®à¯", "à®ªà®³à¯à®³à®¿ à®®à®¿à®•à®µà¯à®®à¯ à®¤à¯‚à®°à®¤à¯à®¤à®¿à®²à¯ / à®ªà¯‹à®•à¯à®•à¯à®µà®°à®¤à¯à®¤à¯ à®šà®¿à®•à¯à®•à®²à¯", "à®µà¯‡à®²à¯ˆ / à®šà®•à¯‹à®¤à®° à®ªà®°à®¾à®®à®°à®¿à®ªà¯à®ªà¯ à®¤à¯‡à®µà¯ˆ", "à®‰à®Ÿà®²à¯à®¨à®² à®ªà®¿à®°à®šà¯à®šà®¿à®©à¯ˆ"],
      travelMode: ["à®¨à®Ÿà¯ˆ", "à®šà¯ˆà®•à¯à®•à®¿à®³à¯", "à®ªà®¸à¯", "à®ªà¯†à®±à¯à®±à¯‹à®°à¯ à®…à®´à¯ˆà®¤à¯à®¤à¯ à®šà¯†à®²à¯à®•à®¿à®±à®¾à®°à¯"],
      yesNo: ["à®†à®®à¯", "à®‡à®²à¯à®²à¯ˆ"],
      yesNoDK: ["à®†à®®à¯", "à®‡à®²à¯à®²à¯ˆ", "à®¤à¯†à®°à®¿à®¯à®¾à®¤à¯"]
    },
    e: { waterSource: "à®•à¯à®Ÿà®¿à®¨à¯€à®°à¯ à®®à¯à®•à¯à®•à®¿à®¯ à®®à¯‚à®²à®¾à®¤à®¾à®°à®®à¯:", waterTreatment: "à®•à¯à®Ÿà®¿à®•à¯à®•à¯à®®à¯ à®®à¯à®©à¯ à®¤à®£à¯à®£à¯€à®°à¯ˆ à®šà¯à®¤à¯à®¤à®¿à®•à®°à®¿à®•à¯à®•à®¿à®±à¯€à®°à¯à®•à®³à®¾?", hasToilet: "à®µà¯€à®Ÿà¯à®Ÿà®¿à®²à¯ à®•à®´à®¿à®µà®±à¯ˆ à®‡à®°à¯à®•à¯à®•à®¿à®±à®¤à®¾?", toiletUsable: "à®•à®´à®¿à®µà®±à¯ˆ à®¤à®±à¯à®ªà¯‹à®¤à¯ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤ à®®à¯à®Ÿà®¿à®•à®¿à®±à®¤à®¾?", toiletUsers: "à®¯à®¾à®°à¯ à®•à®´à®¿à®µà®±à¯ˆ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à¯à®•à®¿à®±à®¾à®°à¯à®•à®³à¯?", menstrualMaterial: "à®®à®¾à®¤à®µà®¿à®Ÿà®¾à®¯à¯ à®šà¯à®•à®¾à®¤à®¾à®°à®®à¯, à®à®©à¯à®© à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à¯à®•à®¿à®±à¯€à®°à¯à®•à®³à¯?", menstrualDisposal: "à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à®¿à®¯ à®ªà¯Šà®°à¯à®Ÿà¯à®•à®³à¯ˆ à®à®ªà¯à®ªà®Ÿà®¿ à®…à®•à®±à¯à®±à¯à®•à®¿à®±à¯€à®°à¯à®•à®³à¯?", greenVeg: "à®•à¯à®Ÿà¯à®®à¯à®ªà®®à¯ à®à®µà¯à®µà®³à®µà¯ à®…à®Ÿà®¿à®•à¯à®•à®Ÿà®¿ à®•à¯€à®°à¯ˆ à®šà®¾à®ªà¯à®ªà®¿à®Ÿà¯à®•à®¿à®±à®¤à¯?", milkFreq: "à®•à¯à®Ÿà¯à®®à¯à®ªà®®à¯ à®à®µà¯à®µà®³à®µà¯ à®…à®Ÿà®¿à®•à¯à®•à®Ÿà®¿ à®ªà®¾à®²à¯ à®…à®²à¯à®²à®¤à¯ à®¤à®¯à®¿à®°à¯ à®šà®¾à®ªà¯à®ªà®¿à®Ÿà¯à®•à®¿à®±à®¤à¯?", ncdMatrix: "à®®à®°à¯à®¤à¯à®¤à¯à®µà®°à¯ à®•à¯à®Ÿà¯à®®à¯à®ªà®¤à¯à®¤à®¿à®²à¯ à®¯à®¾à®°à¯à®•à¯à®•à¯à®®à¯ à®‡à®¨à¯à®¤ à®¨à¯‹à®¯à¯à®•à®³à¯ à®‡à®°à¯à®ªà¯à®ªà®¤à®¾à®• à®šà¯Šà®©à¯à®©à®¾à®°à¯à®•à®³à®¾?", bp: "à®…à®¤à®¿à®• à®‡à®°à®¤à¯à®¤ à®…à®´à¯à®¤à¯à®¤à®®à¯, BP", diabetes: "à®¨à¯€à®°à®¿à®´à®¿à®µà¯, à®šà®°à¯à®•à¯à®•à®°à¯ˆ à®¨à¯‹à®¯à¯" },
    eOpts: {
      waterSource: ["à®µà¯€à®Ÿà¯à®Ÿà®¿à®±à¯à®•à¯ à®•à¯à®´à®¾à®¯à¯ à®¤à®£à¯à®£à¯€à®°à¯", "à®ªà¯Šà®¤à¯ à®•à¯à®´à®¾à®¯à¯", "RO à®†à®²à¯ˆ", "à®¤à®¿à®±à®¨à¯à®¤ à®•à®¿à®£à®±à¯"],
      waterTreatment: ["à®•à¯Šà®¤à®¿à®•à¯à®• à®µà¯ˆà®•à¯à®•à®¿à®±à¯‹à®®à¯", "à®µà®Ÿà®¿à®•à®Ÿà¯à®Ÿà¯à®•à®¿à®±à¯‹à®®à¯", "à®¤à¯à®£à®¿ à®µà®Ÿà®¿à®•à®Ÿà¯à®Ÿà®²à¯", "à®à®¨à¯à®¤ à®šà¯à®¤à¯à®¤à®¿à®•à®°à®¿à®ªà¯à®ªà¯à®®à¯ à®‡à®²à¯à®²à¯ˆ"],
      toiletUsers: ["à®…à®©à¯ˆà®µà®°à¯à®®à¯", "à®ªà¯†à®£à¯à®•à®³à¯ à®®à®Ÿà¯à®Ÿà¯à®®à¯", "à®®à¯à®¤à®¿à®¯à¯‹à®°à¯ à®®à®Ÿà¯à®Ÿà¯à®®à¯", "à®¯à®¾à®°à¯à®®à¯ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à¯à®µà®¤à®¿à®²à¯à®²à¯ˆ"],
      menstrualMaterial: ["à®šà®¾à®©à®¿à®Ÿà¯à®Ÿà®°à®¿ à®¨à®¾à®ªà¯à®•à®¿à®©à¯", "à®¤à¯à®£à®¿", "à®‡à®°à®£à¯à®Ÿà¯à®®à¯"],
      menstrualDisposal: ["à®•à¯à®ªà¯à®ªà¯ˆà®¤à¯ à®¤à¯Šà®Ÿà¯à®Ÿà®¿", "à®à®°à®¿à®¤à¯à®¤à¯à®µà®¿à®Ÿà¯à®•à®¿à®±à¯‹à®®à¯", "à®ªà¯à®¤à¯ˆà®•à¯à®•à®¿à®±à¯‹à®®à¯", "à®¤à®¿à®±à®¨à¯à®¤ à®µà¯†à®³à®¿à®¯à®¿à®²à¯ à®¤à¯‚à®•à¯à®•à®¿ à®à®±à®¿à®•à®¿à®±à¯‹à®®à¯", "à®‡à®©à¯à®šà®¿à®©à®°à¯‡à®Ÿà¯à®Ÿà®°à¯"],
      dietFreq: ["à®¤à®¿à®©à®®à¯à®®à¯", "à®µà®¾à®°à®®à¯ 2-3 à®®à¯à®±à¯ˆ", "à®…à®°à®¿à®¤à®¾à®•"],
      yesNo: ["à®†à®®à¯", "à®‡à®²à¯à®²à¯ˆ"]
    },
    f: { segregation: "à®µà¯€à®Ÿà¯à®Ÿà®¿à®²à¯ à®ˆà®° à®®à®±à¯à®±à¯à®®à¯ à®‰à®²à®°à¯ à®•à®´à®¿à®µà¯à®•à®³à¯ˆ à®¤à®©à®¿à®¯à®¾à®• à®ªà®¿à®°à®¿à®•à¯à®•à®¿à®±à¯€à®°à¯à®•à®³à®¾?", wetWaste: "à®ˆà®° à®•à®´à®¿à®µà¯ à®…à®•à®±à¯à®±à¯à®®à¯ à®®à¯à®±à¯ˆ", dryWaste: "à®‰à®²à®°à¯ à®•à®´à®¿à®µà¯ à®…à®•à®±à¯à®±à¯à®®à¯ à®®à¯à®±à¯ˆ", collector: "à®¤à¯‚à®¯à¯à®®à¯ˆà®•à¯à®•à®¾à®µà®²à®°à¯ à®µà¯€à®Ÿà¯à®Ÿà®¿à®±à¯à®•à¯ à®µà®°à¯à®•à®¿à®±à®¾à®°à¯à®•à®³à®¾?" },
    fOpts: {
      segregation: ["à®à®ªà¯à®ªà¯‹à®¤à¯à®®à¯", "à®šà®¿à®² à®¨à¯‡à®°à®™à¯à®•à®³à®¿à®²à¯", "à®’à®°à¯à®ªà¯‹à®¤à¯à®®à¯ à®‡à®²à¯à®²à¯ˆ"],
      wetWaste: ["à®šà¯‡à®•à®°à®¿à®ªà¯à®ªà®µà®°à®¿à®Ÿà®®à¯ à®•à¯Šà®Ÿà¯à®•à¯à®•à®¿à®±à¯‹à®®à¯ (à®ªà®šà¯à®šà¯ˆ à®¤à¯Šà®Ÿà¯à®Ÿà®¿)", "à®•à®¾à®²à¯à®¨à®Ÿà¯ˆà®•à®³à¯à®•à¯à®•à¯ à®¤à¯€à®µà®©à®®à®¾à®•", "à®µà¯€à®Ÿà¯à®Ÿà®¿à®²à¯ à®‰à®°à®®à®¾à®• à®®à®¾à®±à¯à®±à¯à®•à®¿à®±à¯‹à®®à¯", "à®šà®¾à®²à¯ˆà®¯à®¿à®²à¯ / à®•à®¾à®²à¯à®µà®¾à®¯à®¿à®²à¯ à®¤à¯‚à®•à¯à®•à®¿ à®à®±à®¿à®•à®¿à®±à¯‹à®®à¯"],
      dryWaste: ["à®šà¯‡à®•à®°à®¿à®ªà¯à®ªà®µà®°à®¿à®Ÿà®®à¯ à®•à¯Šà®Ÿà¯à®•à¯à®•à®¿à®±à¯‹à®®à¯ (à®šà®¿à®µà®ªà¯à®ªà¯ à®¤à¯Šà®Ÿà¯à®Ÿà®¿)", "à®à®°à®¿à®¤à¯à®¤à¯à®µà®¿à®Ÿà¯à®•à®¿à®±à¯‹à®®à¯", "à®•à¯à®ªà¯à®ªà®¿à®¯à®™à¯à®•à®¾à®°à®°à¯à®•à¯à®•à¯ à®µà®¿à®±à¯à®•à®¿à®±à¯‹à®®à¯", "à®šà®¾à®²à¯ˆà®¯à®¿à®²à¯ / à®•à®¾à®²à¯à®µà®¾à®¯à®¿à®²à¯ à®¤à¯‚à®•à¯à®•à®¿ à®à®±à®¿à®•à®¿à®±à¯‹à®®à¯"],
      collector: ["à®¤à®¿à®©à®®à¯à®®à¯", "à®µà®¾à®°à®®à¯ à®’à®°à¯à®®à¯à®±à¯ˆ", "à®’à®´à¯à®™à¯à®•à®±à¯à®± à®®à¯à®±à¯ˆà®¯à®¿à®²à¯", "à®µà®°à¯à®µà®¤à®¿à®²à¯à®²à¯ˆ"]
    },
    g: { ownsLand: "à®µà®¿à®µà®šà®¾à®¯ à®¨à®¿à®²à®®à¯ à®µà¯ˆà®¤à¯à®¤à®¿à®°à¯à®•à¯à®•à®¿à®±à¯€à®°à¯à®•à®³à®¾?", landAcres: "à®à®¤à¯à®¤à®©à¯ˆ à®à®•à¯à®•à®°à¯?", milchAnimals: "à®ªà®¾à®²à¯ à®¤à®°à¯à®®à¯ à®®à®¾à®Ÿà¯à®•à®³à¯ à®…à®²à¯à®²à®¤à¯ à®à®°à¯à®®à¯ˆà®•à®³à¯ à®µà¯ˆà®¤à¯à®¤à®¿à®°à¯à®•à¯à®•à®¿à®±à¯€à®°à¯à®•à®³à®¾?", milchCount: "à®®à¯Šà®¤à¯à®¤ à®•à®¾à®²à¯à®¨à®Ÿà¯ˆ à®à®£à¯à®£à®¿à®•à¯à®•à¯ˆ", milkYield: "à®¤à®¿à®©à®šà®°à®¿ à®ªà®¾à®²à¯ à®…à®³à®µà¯, à®²à®¿à®Ÿà¯à®Ÿà®°à®¿à®²à¯", fodder: "à®•à¯‹à®Ÿà¯ˆà®¯à®¿à®²à¯ à®¤à¯€à®µà®© à®ªà®±à¯à®±à®¾à®•à¯à®•à¯à®±à¯ˆ à®‡à®°à¯à®•à¯à®•à®¿à®±à®¤à®¾?", cropWater: "à®•à®Ÿà®¨à¯à®¤ 2 à®µà®°à¯à®Ÿà®™à¯à®•à®³à®¿à®²à¯ à®¨à¯€à®°à¯ à®ªà®±à¯à®±à®¾à®•à¯à®•à¯à®±à¯ˆà®¯à®¾à®²à¯ à®ªà®¯à®¿à®°à¯ à®ªà®¾à®¤à®¿à®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à®¾?" },
    gOpts: { yesNo: ["à®†à®®à¯", "à®‡à®²à¯à®²à¯ˆ"] }
  }
};

// ================================================================
//  STATE
// ================================================================
var lang = "en-IN";
var formSubmitted = false;
var gpsLat = "", gpsLng = "";
var isRec = false, recog = null, curMicBtn = null, curMicField = null;
var photoBase64 = null;

// ================================================================
//  INIT
// ================================================================
window.onload = function() { captureGPS(); setDate(); };

function captureGPS() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      function(pos) {
        gpsLat = pos.coords.latitude.toFixed(6);
        gpsLng = pos.coords.longitude.toFixed(6);
        var el = document.getElementById('gpsDisplay');
        if (el) el.textContent = 'Lat: ' + gpsLat + ', Long: ' + gpsLng;
      },
      function() {
        var el = document.getElementById('gpsDisplay');
        if (el) el.textContent = 'GPS unavailable';
      },
      { timeout: 10000, enableHighAccuracy: true }
    );
  }
}

function setDate() {
  var d = new Date();
  var dateStr = d.getDate().toString().padStart(2,'0') + '/' + (d.getMonth()+1).toString().padStart(2,'0') + '/' + d.getFullYear();
  var el = document.getElementById('dateDisplay');
  if (el) el.textContent = dateStr;
}

function showProcessingOverlay(on) {
  var ov = document.getElementById('submit-overlay');
  if (!ov) return;
  var isTa = (lang === 'ta-IN');
  if (on) {
    document.getElementById('overlay-spinner').style.display = 'block';
    document.getElementById('overlay-msg').textContent = isTa ? 'â³ à®•à®£à®•à¯à®•à¯†à®Ÿà¯à®ªà¯à®ªà¯ˆ à®šà®®à®°à¯à®ªà¯à®ªà®¿à®•à¯à®•à®¿à®±à¯‹à®®à¯â€¦' : 'â³ Submitting your surveyâ€¦';
    document.getElementById('overlay-submsg').textContent = isTa ? 'à®•à®¾à®¤à¯à®¤à®¿à®°à¯à®•à¯à®•à®µà¯à®®à¯. à®ªà®•à¯à®•à®¤à¯à®¤à¯ˆ à®®à¯‚à®Ÿà®¾à®¤à¯€à®°à¯à®•à®³à¯.' : 'Please wait. Do not close this page.';
    ov.classList.add('visible');
  } else {
    ov.classList.remove('visible');
  }
}

// ================================================================
//  LANGUAGE SELECTION
// ================================================================
function selectLang(l) {
  stopAllAudio();
  lang = l;
  document.querySelectorAll('.lang-btn').forEach(function(b) { b.classList.remove('active'); });
  document.getElementById('btn-lang-' + (l === 'en-IN' ? 'en' : 'ta')).classList.add('active');
  var survey = document.getElementById('stepSurvey');
  if (survey && survey.style.display !== 'none') { renderAllOptions(); updateUILabels(); }
}

// ================================================================
//  CONSENT
// ================================================================
function showConsent() {
  document.getElementById('stepLang').style.display = 'none';
  document.getElementById('stepConsent').style.display = 'block';
  var t = T[lang].consent;
  document.getElementById('consentTitle').textContent = 'ğŸ“œ ' + t.title;
  document.getElementById('consentText').textContent = t.text;
  document.getElementById('consentYesLabel').textContent = t.yes;
  document.getElementById('consentNoLabel').textContent = t.no;
  document.getElementById('consentProceedLabel').textContent = t.proceed;
  var lbl = document.getElementById('consentAudioLabel');
  if (lbl) lbl.textContent = lang === 'ta-IN' ? 'à®šà®®à¯à®®à®¤à®¤à¯à®¤à¯ˆ à®•à¯‡à®³à¯à®™à¯à®•à®³à¯' : 'Listen to Consent';
}

function selectConsent(val) {
  document.querySelectorAll('.consent-opt').forEach(function(o) { o.classList.remove('selected'); });
  if (val === 'yes') { document.getElementById('consentYesOpt').classList.add('selected'); document.getElementById('consentYes').checked = true; }
  else { document.getElementById('consentNoOpt').classList.add('selected'); document.getElementById('consentNo').checked = true; }
}

function proceedFromConsent() {
  var yes = document.getElementById('consentYes').checked;
  var no  = document.getElementById('consentNo').checked;
  if (!yes && !no) { alert(lang === 'ta-IN' ? 'à®¤à®¯à®µà¯à®šà¯†à®¯à¯à®¤à¯ à®’à®°à¯ à®µà®¿à®°à¯à®ªà¯à®ªà®¤à¯à®¤à¯ˆ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯.' : 'Please select Yes or No to proceed.'); return; }
  stopAllAudio();
  if (no) {
    document.getElementById('stepConsent').style.display = 'none';
    document.getElementById('appBody').innerHTML = '<div style="text-align:center;padding:40px;font-size:16px;color:#555">' + T[lang].consent.declined + '</div>';
    return;
  }
  document.getElementById('stepConsent').style.display = 'none';
  document.getElementById('stepSurvey').style.display = 'block';
  renderAllOptions();
  updateUILabels();
}

// ================================================================
//  UI LABELS
// ================================================================
function updateUILabels() {
  var t = T[lang];
  var isTa = lang === 'ta-IN';
  setTxt('sec0Title','ğŸ“‹ '+(isTa?'à®ªà®¿à®°à®¿à®µà¯ 0: à®®à¯†à®Ÿà¯à®Ÿà®¾à®Ÿà¯‡à®Ÿà¯à®Ÿà®¾':'SECTION 0: METADATA'));
  setTxt('secATitle','ğŸ‘¤ '+(isTa?'à®ªà®¿à®°à®¿à®µà¯ A: à®šà®®à¯‚à®•-à®œà®©à®¤à¯à®¤à¯Šà®•à¯ˆ à®µà®¿à®µà®°à®®à¯':'SECTION A: SOCIO-DEMOGRAPHIC PROFILE'));
  setTxt('secBTitle','ğŸ’¼ '+(isTa?'à®ªà®¿à®°à®¿à®µà¯ B: à®µà®¾à®´à¯à®µà®¾à®¤à®¾à®°à®®à¯ à®®à®±à¯à®±à¯à®®à¯ à®ªà¯Šà®°à¯à®³à®¾à®¤à®¾à®° à®¨à®¿à®²à¯ˆ':'SECTION B: LIVELIHOODS & ECONOMIC STATUS'));
  setTxt('secCTitle','ğŸ‘©â€ğŸ‘©â€ğŸ‘§ '+(isTa?'à®ªà®¿à®°à®¿à®µà¯ C: à®ªà¯†à®£à¯à®•à®³à¯ à®®à¯‡à®®à¯à®ªà®¾à®Ÿà¯ (SHG à®¨à®¿à®²à¯ˆ)':'SECTION C: WOMEN EMPOWERMENT (SHG STATUS)'));
  setTxt('secCSubtitle',isTa?'à®•à¯à®Ÿà¯à®®à¯à®ªà®¤à¯à®¤à®¿à®©à¯ à®ªà¯†à®£à¯ à®¤à®²à¯ˆà®µà®°à®¿à®Ÿà®®à¯ à®®à®Ÿà¯à®Ÿà¯à®®à¯ à®•à¯‡à®³à¯à®™à¯à®•à®³à¯ | SHG à®‰à®±à¯à®ªà¯à®ªà®¿à®©à®°à¯ à®‡à®²à¯à®²à®¾à®µà®¿à®Ÿà¯à®Ÿà®¾à®²à¯ à®¤à®µà®¿à®°à¯à®•à¯à®•à®µà¯à®®à¯':'Ask specifically to the female head of household | Skip if not an SHG Member');
  setTxt('secDTitle','ğŸ“š '+(isTa?'à®ªà®¿à®°à®¿à®µà¯ D: à®•à®²à¯à®µà®¿ à®®à®±à¯à®±à¯à®®à¯ à®Ÿà®¿à®œà®¿à®Ÿà¯à®Ÿà®²à¯ à®…à®£à¯à®•à®²à¯':'SECTION D: EDUCATION & DIGITAL ACCESS'));
  setTxt('secDSubtitle',isTa?'à®µà¯€à®Ÿà¯à®Ÿà®¿à®²à¯ 5-18 à®µà®¯à®¤à¯ à®•à¯à®´à®¨à¯à®¤à¯ˆà®•à®³à¯ à®‡à®°à¯à®¨à¯à®¤à®¾à®²à¯ à®•à¯‡à®³à¯à®™à¯à®•à®³à¯':'Ask for every child aged 5-18 years in the household');
  setTxt('secETitle','ğŸ¥ '+(isTa?'à®ªà®¿à®°à®¿à®µà¯ E: à®šà¯à®•à®¾à®¤à®¾à®°à®®à¯, à®Šà®Ÿà¯à®Ÿà®šà®¤à¯à®¤à¯ à®®à®±à¯à®±à¯à®®à¯ WASH':'SECTION E: HEALTH, NUTRITION & WASH'));
  setTxt('secFTitle','ğŸ—‘ï¸ '+(isTa?'à®ªà®¿à®°à®¿à®µà¯ F: à®•à®´à®¿à®µà¯ à®®à¯‡à®²à®¾à®£à¯à®®à¯ˆ':'SECTION F: WASTE MANAGEMENT (SWM)'));
  setTxt('secGTitle','ğŸŒ¾ '+(isTa?'à®ªà®¿à®°à®¿à®µà¯ G: à®µà¯‡à®³à®¾à®£à¯à®®à¯ˆ à®®à®±à¯à®±à¯à®®à¯ à®•à®¾à®²à¯à®¨à®Ÿà¯ˆ':'SECTION G: AGRICULTURE & LIVESTOCK (NRM)'));
  setTxt('qVillageText',t.q.villageName); setTxt('qNameText',t.a.name);
  setTxt('qCasteText',isTa?'à®šà®®à¯‚à®• à®µà®•à¯ˆ (à®šà®¾à®¤à®¿)':'Social Category (Caste)');
  setTxt('qHouseTypeText',t.a.houseType); setTxt('qFamilySizeText',t.a.familySize);
  setTxt('lblMales',isTa?'à®µà®¯à®¤à¯à®•à¯à®•à¯ à®®à¯‡à®±à¯à®ªà®Ÿà¯à®Ÿ à®†à®£à¯à®•à®³à¯ (18+)':'Adult Males (18+)');
  setTxt('lblFemales',isTa?'à®µà®¯à®¤à¯à®•à¯à®•à¯ à®®à¯‡à®±à¯à®ªà®Ÿà¯à®Ÿ à®ªà¯†à®£à¯à®•à®³à¯ (18+)':'Adult Females (18+)');
  setTxt('lblChildren',isTa?'à®•à¯à®´à®¨à¯à®¤à¯ˆà®•à®³à¯ (0-17)':'Children (0-17)');
  setTxt('lblTotal',isTa?'à®®à¯Šà®¤à¯à®¤ à®‰à®±à¯à®ªà¯à®ªà®¿à®©à®°à¯à®•à®³à¯':'Total Members');
  setTxt('qHasAadharText',t.a.hasAadhar); setTxt('qAadharNumText',t.a.aadharNum);
  setTxt('qPrimaryIncomeText',t.b.primaryIncome);
  setTxt('qMonthlyIncomeText',isTa?'à®šà®°à®¾à®šà®°à®¿ à®®à®¾à®¤à®¾à®¨à¯à®¤à®¿à®° à®µà®°à¯à®®à®¾à®©à®®à¯ (INR)':'Average Monthly Household Income (Estimate) â€“ INR');
  setTxt('qRationCardText',t.b.rationCard);
  setTxt('qHasLoansText',isTa?'à®¤à®±à¯à®ªà¯‹à®¤à¯ à®¨à®¿à®²à¯à®µà¯ˆà®¯à®¿à®²à¯ à®‰à®³à¯à®³ à®•à®Ÿà®©à¯à®•à®³à¯ à®‰à®³à¯à®³à®©à®µà®¾?':'Do you currently have any outstanding loans?');
  setTxt('qLoanSourceText',isTa?'à®†à®®à¯†à®©à®¿à®²à¯: à®¯à®¾à®°à®¿à®Ÿà®®à¯ à®•à®Ÿà®©à¯ à®µà®¾à®™à¯à®•à®¿à®©à¯€à®°à¯à®•à®³à¯? (à®ªà®² à®¤à¯‡à®°à¯à®µà¯à®•à®³à¯)':'If Yes: Who did you borrow from? (Select all that apply)');
  setTxt('qMigrationText',t.b.migration);
  setTxt('qMigrationFreqText',isTa?'à®†à®®à¯†à®©à®¿à®²à¯:à®à®µà¯à®µà®³à®µà¯ à®¤à®Ÿà®µà¯ˆ à®µà¯€à®Ÿà¯à®Ÿà®¿à®±à¯à®•à¯ à®µà®°à¯à®•à®¿à®±à®¾à®°à¯à®•à®³à¯?':'If Yes: Frequency of return?');
  setTxt('qSHGMemberText',isTa?'à®¨à¯€à®™à¯à®•à®³à¯ à®šà¯à®¯ à®‰à®¤à®µà®¿ à®•à¯à®´à¯ (SHG) à®‰à®±à¯à®ªà¯à®ªà®¿à®©à®°à®¾?':'Are you a member of a Self-Help Group (SHG)?');
  setTxt('qSHGNameText',t.c.shgName); setTxt('qSHGMeetFreqText',t.c.meetFreq);
  setTxt('qSHGSavesText',t.c.shgSaves); setTxt('qSHGLoanText',t.c.shgLoan);
  setTxt('qSHGLoanPurposeText',isTa?'à®†à®®à¯†à®©à®¿à®²à¯: à®•à®Ÿà®©à¯ à®µà®¾à®™à¯à®•à®¿à®¯à®¤à®©à¯ à®¨à¯‹à®•à¯à®•à®®à¯?':'If Yes: Purpose of Loan?');
  setTxt('matD1Row',isTa?'à®•à®²à¯à®µà®¿ à®¨à®¿à®²à¯ˆ':'Schooling Status');
  setTxt('matD1Male',t.d.male); setTxt('matD1Female',t.d.female);
  setTxt('lblEnrolled',t.d.enrolled); setTxt('lblDropout',t.d.dropout); setTxt('lblNeverEnrolled',t.d.neverEnrolled);
  setTxt('qSchoolMatrixText',isTa?'à®•à®²à¯à®µà®¿ à®¨à®¿à®²à¯ˆ (à®®à¯‡à®Ÿà¯à®°à®¿à®•à¯à®¸à¯ â€“ à®†à®£à¯ à®®à®±à¯à®±à¯à®®à¯ à®ªà¯†à®£à¯)':'Schooling Status (Matrix â€“ Male and Female)');
  setTxt('qSchoolTypeText',isTa?'(à®šà¯‡à®°à¯à®¨à¯à®¤à®¿à®°à¯à®¨à¯à®¤à®¾à®²à¯) à®ªà®³à¯à®³à®¿ à®µà®•à¯ˆ':'(If Enrolled) Type of School');
  setTxt('qDropoutReasonText',isTa?'(à®ªà®Ÿà®¿à®ªà¯à®ªà¯ˆ à®µà®¿à®Ÿà¯à®Ÿà®¾à®²à¯) à®µà®¿à®Ÿà¯à®Ÿ à®•à®¾à®°à®£à®®à¯':'(If Dropout) Reason for Leaving');
  setTxt('qTravelSchoolText',t.d.travelSchool);
  setTxt('lblTravelMode',isTa?'à®ªà®¯à®£ à®®à¯à®±à¯ˆ:':'Mode of Travel:');
  setTxt('lblTravelDistance',isTa?'à®ªà®³à¯à®³à®¿ à®¤à¯‚à®°à®®à¯ (à®•à®¿.à®®à¯€):':'Distance to School (km):');
  setTxt('qTuitionText',t.d.tuition); setTxt('qLearningText',t.d.learning);
  setTxt('qSmartphoneText',t.d.smartphone); setTxt('qInternetText',t.d.internet);
  setTxt('qWaterSourceText',t.e.waterSource); setTxt('qWaterTreatmentText',t.e.waterTreatment);
  setTxt('qHasToiletText',t.e.hasToilet);
  setTxt('qToiletUsableText',isTa?'à®†à®®à¯†à®©à®¿à®²à¯: à®¤à®±à¯à®ªà¯‹à®¤à¯ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤ à®®à¯à®Ÿà®¿à®•à®¿à®±à®¤à®¾?':'If Yes: Is it currently usable (Clean/Water available)?');
  setTxt('qToiletUsersText',isTa?'à®†à®®à¯†à®©à®¿à®²à¯: à®¯à®¾à®°à¯ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à¯à®•à®¿à®±à®¾à®°à¯à®•à®³à¯?':'If Yes: Who uses it?');
  setTxt('qMenstrualMaterialText',t.e.menstrualMaterial); setTxt('qMenstrualDisposalText',t.e.menstrualDisposal);
  setTxt('qGreenVegText',t.e.greenVeg); setTxt('qMilkFreqText',t.e.milkFreq);
  setTxt('qNCDMatrixText',isTa?'à®®à®°à¯à®¤à¯à®¤à¯à®µà®°à¯ à®•à¯à®Ÿà¯à®®à¯à®ªà®¤à¯à®¤à®¿à®²à¯ à®¯à®¾à®°à¯à®•à¯à®•à¯à®®à¯ à®‡à®¨à¯à®¤ à®¨à¯‹à®¯à¯à®•à®³à¯ à®‡à®°à¯à®ªà¯à®ªà®¤à®¾à®• à®šà¯Šà®©à¯à®©à®¾à®°à¯à®•à®³à®¾? (à®†à®£à¯/à®ªà¯†à®£à¯ à®¤à®©à®¿à®¯à®¾à®•)':'Has a doctor told anyone in the family they have: (Number of people for Male and Female separately)');
  setTxt('ncdCondHeader',isTa?'à®‰à®Ÿà®²à¯à®¨à®² à®¨à®¿à®²à¯ˆ':'Health Condition');
  setTxt('ncdMaleHeader',t.d.male); setTxt('ncdFemaleHeader',t.d.female);
  setTxt('lblBP',t.e.bp); setTxt('lblDiabetes',t.e.diabetes);
  setTxt('qWasteSegText',t.f.segregation); setTxt('qWetWasteText',t.f.wetWaste); setTxt('qDryWasteText',t.f.dryWaste);
  setTxt('qWasteCollectorText',isTa?'à®¤à¯‚à®¯à¯à®®à¯ˆà®•à¯à®•à®¾à®µà®²à®°à¯ à®‰à®™à¯à®•à®³à¯ à®µà¯€à®Ÿà¯à®Ÿà®¿à®±à¯à®•à¯ à®µà®°à¯à®•à®¿à®±à®¾à®°à¯à®•à®³à®¾?':'Does the waste collector (Thooimaikavalar) come to your door?');
  setTxt('qOwnsLandText',t.g.ownsLand);
  setTxt('qLandAcresText',isTa?'à®†à®®à¯†à®©à®¿à®²à¯: à®à®¤à¯à®¤à®©à¯ˆ à®à®•à¯à®•à®°à¯?':'If Yes: How many Acres?');
  setTxt('qMilchAnimalsText',t.g.milchAnimals);
  setTxt('qMilchCountText',isTa?'à®†à®®à¯†à®©à®¿à®²à¯: à®®à¯Šà®¤à¯à®¤ à®à®£à¯à®£à®¿à®•à¯à®•à¯ˆ':'If Yes: Total Count of Milch Animals');
  setTxt('qMilkYieldText',isTa?'à®†à®®à¯†à®©à®¿à®²à¯: à®¤à®¿à®©à®šà®°à®¿ à®ªà®¾à®²à¯ à®®à¯Šà®¤à¯à®¤ à®…à®³à®µà¯ (à®²à®¿à®Ÿà¯à®Ÿà®°à¯)':'If Yes: Daily Milk Yield (Total Liters)');
  setTxt('qFodderText',t.g.fodder); setTxt('qCropWaterText',t.g.cropWater);
  setTxt('submitBtn',isTa?'âœ… à®•à®£à®•à¯à®•à¯†à®Ÿà¯à®ªà¯à®ªà¯ˆ à®šà®®à®°à¯à®ªà¯à®ªà®¿à®•à¯à®•à®µà¯à®®à¯':'âœ… Submit Survey');

  // Set data-speak on audio buttons
  (function(){
    function ds(id,text){var b=document.getElementById(id);if(b&&text)b.dataset.speak=text;}
    ds('btn-audio-village',T[lang].q.villageName||''); ds('btn-audio-name',T[lang].a.name||'');
    ds('btn-audio-caste',T[lang].a.caste||''); ds('btn-audio-house',T[lang].a.houseType||'');
    ds('btn-audio-family',T[lang].a.familySize||''); ds('btn-audio-hasaadhar',T[lang].a.hasAadhar||'');
    ds('btn-audio-aadhar',T[lang].a.aadharNum||''); ds('btn-audio-income',T[lang].b.primaryIncome||'');
    ds('btn-audio-monthlyincome',T[lang].b.monthlyIncome||''); ds('btn-audio-ration',T[lang].b.rationCard||'');
    ds('btn-audio-loans',T[lang].b.hasLoans||''); ds('btn-audio-loansource',T[lang].b.loanSource||'');
    ds('btn-audio-migration',T[lang].b.migration||''); ds('btn-audio-migfreq',T[lang].b.migrationFreq||'');
    ds('btn-audio-shgmember',T[lang].b.shgMember||''); ds('btn-audio-shgname',T[lang].c.shgName||'');
    ds('btn-audio-shgmeet',T[lang].c.meetFreq||''); ds('btn-audio-shgsaves',T[lang].c.shgSaves||'');
    ds('btn-audio-shgloan',T[lang].c.shgLoan||''); ds('btn-audio-shgloanpurpose',T[lang].c.shgLoanPurpose||'');
    ds('btn-audio-school',T[lang].d.schoolStatus||''); ds('btn-mat-male',T[lang].d.male||'');
    ds('btn-mat-female',T[lang].d.female||''); ds('btn-mat-enrolled',T[lang].d.enrolled||'');
    ds('btn-mat-dropout',T[lang].d.dropout||''); ds('btn-mat-never',T[lang].d.neverEnrolled||'');
    ds('btn-audio-schooltype',T[lang].d.schoolType||''); ds('btn-audio-dropoutreason',T[lang].d.dropoutReason||'');
    ds('btn-audio-travelschool',T[lang].d.travelSchool||''); ds('btn-audio-tuition',T[lang].d.tuition||'');
    ds('btn-audio-learning',T[lang].d.learning||''); ds('btn-audio-smartphone',T[lang].d.smartphone||'');
    ds('btn-audio-internet',T[lang].d.internet||''); ds('btn-audio-watersource',T[lang].e.waterSource||'');
    ds('btn-audio-watertreat',T[lang].e.waterTreatment||''); ds('btn-audio-toilet',T[lang].e.hasToilet||'');
    ds('btn-audio-toiletusable',T[lang].e.toiletUsable||''); ds('btn-audio-toiletusers',T[lang].e.toiletUsers||'');
    ds('btn-audio-menstrual',T[lang].e.menstrualMaterial||''); ds('btn-audio-menstrualdisposal',T[lang].e.menstrualDisposal||'');
    ds('btn-audio-greenveg',T[lang].e.greenVeg||''); ds('btn-audio-milkfreq',T[lang].e.milkFreq||'');
    ds('btn-audio-ncd',T[lang].e.ncdMatrix||''); ds('btn-audio-wasteseg',T[lang].f.segregation||'');
    ds('btn-audio-wetwaste',T[lang].f.wetWaste||''); ds('btn-audio-drywaste',T[lang].f.dryWaste||'');
    ds('btn-audio-wastecollect',T[lang].f.collector||''); ds('btn-audio-land',T[lang].g.ownsLand||'');
    ds('btn-audio-acres',T[lang].g.landAcres||''); ds('btn-audio-milch',T[lang].g.milchAnimals||'');
    ds('btn-audio-milchcount',T[lang].g.milchCount||''); ds('btn-audio-milkyield',T[lang].g.milkYield||'');
    ds('btn-audio-fodder',T[lang].g.fodder||''); ds('btn-audio-cropwater',T[lang].g.cropWater||'');
  })();
}

function setTxt(id,text){var el=document.getElementById(id);if(el)el.textContent=text;}

// ================================================================
//  RENDER OPTIONS
// ================================================================
function renderAllOptions() {
  var t=T[lang]; var en=T['en-IN'];
  renderRadio('village',t.villageOpts,t.villageOpts,false,'',en.villageOpts);
  renderRadio('caste',t.aOpts.caste,t.aOpts.caste,false,'',en.aOpts.caste);
  renderRadio('house',t.aOpts.houseType,t.aOpts.houseType,false,'',en.aOpts.houseType);
  renderRadio('hasaadhar',t.aOpts.yesNo,t.aOpts.yesNo,false,'checkAadhar',en.aOpts.yesNo);
  renderRadio('income',t.bOpts.primaryIncome,t.bOpts.primaryIncome,false,'',en.bOpts.primaryIncome);
  renderRadio('ration',t.bOpts.rationCard,t.bOpts.rationCard,false,'',en.bOpts.rationCard);
  renderRadio('loans',t.aOpts.yesNo,t.aOpts.yesNo,false,'checkLoans',en.aOpts.yesNo);
  renderRadio('loansource',t.bOpts.loanSource,t.bOpts.loanSource,true,'',en.bOpts.loanSource);
  renderRadio('migration',t.aOpts.yesNo,t.aOpts.yesNo,false,'checkMigration',en.aOpts.yesNo);
  renderRadio('migfreq',t.bOpts.migrationFreq,t.bOpts.migrationFreq,false,'',en.bOpts.migrationFreq);
  renderRadio('shgmember',t.aOpts.yesNo,t.aOpts.yesNo,false,'checkSHG',en.aOpts.yesNo);
  renderRadio('shgmeet',t.cOpts.meetFreq,t.cOpts.meetFreq,false,'',en.cOpts.meetFreq);
  renderRadio('shgsaves',t.cOpts.yesNo,t.cOpts.yesNo,false,'',en.cOpts.yesNo);
  renderRadio('shgloan',t.cOpts.yesNo,t.cOpts.yesNo,false,'checkSHGLoan',en.cOpts.yesNo);
  renderRadio('shgloanpurpose',t.cOpts.shgLoanPurpose,t.cOpts.shgLoanPurpose,false,'',en.cOpts.shgLoanPurpose);
  renderRadio('schooltype',t.dOpts.schoolType,t.dOpts.schoolType,false,'',en.dOpts.schoolType);
  renderRadio('dropoutreason',t.dOpts.dropoutReason,t.dOpts.dropoutReason,false,'',en.dOpts.dropoutReason);
  renderRadio('travelmode',t.dOpts.travelMode,t.dOpts.travelMode,false,'',en.dOpts.travelMode);
  renderRadio('tuition',t.dOpts.yesNo,t.dOpts.yesNo,false,'',en.dOpts.yesNo);
  renderRadio('learning',t.dOpts.yesNoDK,t.dOpts.yesNoDK,false,'',en.dOpts.yesNoDK);
  renderRadio('smartphone',t.dOpts.yesNo,t.dOpts.yesNo,false,'',en.dOpts.yesNo);
  renderRadio('internet',t.dOpts.yesNo,t.dOpts.yesNo,false,'',en.dOpts.yesNo);
  renderRadio('watersource',t.eOpts.waterSource,t.eOpts.waterSource,false,'',en.eOpts.waterSource);
  renderRadio('watertreat',t.eOpts.waterTreatment,t.eOpts.waterTreatment,false,'',en.eOpts.waterTreatment);
  renderRadio('toilet',t.aOpts.yesNo,t.aOpts.yesNo,false,'checkToilet',en.aOpts.yesNo);
  renderRadio('toiletusable',t.aOpts.yesNo,t.aOpts.yesNo,false,'checkToiletUsable',en.aOpts.yesNo);
  renderRadio('toiletusers',t.eOpts.toiletUsers,t.eOpts.toiletUsers,false,'',en.eOpts.toiletUsers);
  renderRadio('menstrual',t.eOpts.menstrualMaterial,t.eOpts.menstrualMaterial,false,'',en.eOpts.menstrualMaterial);
  renderRadio('menstrualdisposal',t.eOpts.menstrualDisposal,t.eOpts.menstrualDisposal,false,'',en.eOpts.menstrualDisposal);
  renderRadio('greenveg',t.eOpts.dietFreq,t.eOpts.dietFreq,false,'',en.eOpts.dietFreq);
  renderRadio('milkfreq',t.eOpts.dietFreq,t.eOpts.dietFreq,false,'',en.eOpts.dietFreq);
  renderRadio('wasteseg',t.fOpts.segregation,t.fOpts.segregation,false,'',en.fOpts.segregation);
  renderRadio('wetwaste',t.fOpts.wetWaste,t.fOpts.wetWaste,false,'',en.fOpts.wetWaste);
  renderRadio('drywaste',t.fOpts.dryWaste,t.fOpts.dryWaste,false,'',en.fOpts.dryWaste);
  renderRadio('wastecollect',t.fOpts.collector,t.fOpts.collector,false,'',en.fOpts.collector);
  renderRadio('land',t.gOpts.yesNo,t.gOpts.yesNo,false,'checkLand',en.gOpts.yesNo);
  renderRadio('milch',t.gOpts.yesNo,t.gOpts.yesNo,false,'checkMilch',en.gOpts.yesNo);
  renderRadio('fodder',t.gOpts.yesNo,t.gOpts.yesNo,false,'',en.gOpts.yesNo);
  renderRadio('cropwater',t.gOpts.yesNo,t.gOpts.yesNo,false,'',en.gOpts.yesNo);
}

function renderRadio(id,labels,audioLabels,isMulti,onChangeFn,values){
  var container=document.getElementById('opts-'+id); if(!container)return;
  var type=isMulti?'checkbox':'radio'; var html='';
  for(var idx=0;idx<labels.length;idx++){
    var label=labels[idx];
    var val=(values&&values[idx])?values[idx]:label;
    var au=(audioLabels[idx]||label).replace(/\\/g,'\\\\').replace(/'/g,"\\'").replace(/"/g,'&quot;');
    var chg=onChangeFn?' onchange="'+onChangeFn+'()"':'';
    html+='<label class="opt-item" onclick="selectOpt(this,\''+id+'\',\''+type+'\')">'+
      '<input type="'+type+'" name="'+id+'" value="'+val.replace(/"/g,'&quot;')+'"'+chg+' onchange="updateOptStyle(this)">'+
      '<span class="opt-label">'+label+'</span>'+
      '<button class="opt-audio" onclick="event.stopPropagation();event.preventDefault();speakText(\''+au+'\',\'\')">ğŸ”Š</button>'+
      '</label>';
  }
  container.innerHTML=html;
}

function selectOpt(labelEl,id,type){
  if(type==='radio'){
    document.querySelectorAll('#opts-'+id+' .opt-item').forEach(function(el){el.classList.remove('selected');});
    labelEl.classList.add('selected');
    var inp=labelEl.querySelector('input');
    if(inp){inp.checked=true;inp.dispatchEvent(new Event('change',{bubbles:true}));}
  } else {
    var inp=labelEl.querySelector('input');
    if(inp){inp.checked=!inp.checked;labelEl.classList[inp.checked?'add':'remove']('selected');inp.dispatchEvent(new Event('change',{bubbles:true}));}
  }
}

function updateOptStyle(input){var label=input.closest('.opt-item');if(label)label.classList[input.checked?'add':'remove']('selected');}

function getSelected(id,isMulti){
  var inputs=document.querySelectorAll('input[name="'+id+'"]:checked');
  var vals=[]; inputs.forEach(function(i){vals.push(i.value);});
  return isMulti?vals.join(', '):(vals[0]||'');
}

// ================================================================
//  CONDITIONAL LOGIC
// ================================================================
function checkAadhar(){showHide('qAadharNum',getSelected('hasaadhar',false)==='Yes');}
function checkLoans(){showHide('qLoanSource',getSelected('loans',false)==='Yes');}
function checkMigration(){showHide('qMigrationFreq',getSelected('migration',false)==='Yes');}
function checkSHG(){showHide('sectionC',getSelected('shgmember',false)==='Yes');}
function checkSHGLoan(){showHide('qSHGLoanPurpose',getSelected('shgloan',false)==='Yes');}
function checkSchoolConditions(){
  var hasEnrolled=parseInt(document.getElementById('enrolledMale').value||'0')>0||parseInt(document.getElementById('enrolledFemale').value||'0')>0;
  var hasDropout=parseInt(document.getElementById('dropoutMale').value||'0')>0||parseInt(document.getElementById('dropoutFemale').value||'0')>0;
  showHide('qSchoolType',hasEnrolled); showHide('qDropoutReason',hasDropout);
}
function checkToilet(){var has=getSelected('toilet',false)==='Yes';showHide('qToiletUsable',has);if(!has)showHide('qToiletUsers',false);}
function checkToiletUsable(){showHide('qToiletUsers',getSelected('toiletusable',false)==='Yes');}
function checkLand(){showHide('qLandAcres',getSelected('land',false)==='Yes');}
function checkMilch(){var has=getSelected('milch',false)==='Yes';showHide('qMilchCount',has);if(!has)showHide('qMilkYield',false);}
function checkMilchCountCondition(){showHide('qMilkYield',parseInt(document.getElementById('milchCount').value||'0')>0);}
function showHide(id,show){var el=document.getElementById(id);if(!el)return;if(show)el.classList.remove('hidden');else el.classList.add('hidden');}

// ================================================================
//  TTS ENGINE
// ================================================================
var currentAudio=null,ttsActive=false,activeBtnId=null;

function speakText(text,btnId){
  if(!text)return;
  if(ttsActive){stopAllAudio();if(activeBtnId===btnId)return;}
  activeBtnId=btnId; setBtnState(btnId,true,'loading');
  if('speechSynthesis' in window){
    window.speechSynthesis.cancel();
    var u=new SpeechSynthesisUtterance(text);
    u.lang=lang; u.rate=0.85; u.volume=1;
    u.onstart=function(){ttsActive=true;setBtnState(btnId,true,'playing');};
    u.onend=function(){ttsActive=false;setBtnState(btnId,false);};
    u.onerror=function(){ttsActive=false;setBtnState(btnId,false);showTextPopup(text);};
    window.speechSynthesis.speak(u);
  } else {setBtnState(btnId,false);showTextPopup(text);}
}

function stopAllAudio(){
  if('speechSynthesis' in window){try{window.speechSynthesis.cancel();}catch(e){}}
  if(currentAudio){try{currentAudio.pause();currentAudio.currentTime=0;}catch(e){}currentAudio=null;}
  ttsActive=false;
  if(activeBtnId)setBtnState(activeBtnId,false);
  activeBtnId=null;
  var lbl=document.getElementById('consentAudioLabel');
  if(lbl)lbl.textContent=(lang==='ta-IN')?'à®šà®®à¯à®®à®¤à®¤à¯à®¤à¯ˆ à®•à¯‡à®³à¯à®™à¯à®•à®³à¯':'Listen to Consent';
}

function setBtnState(btnId,on,state){
  if(!btnId)return;
  var b=document.getElementById(btnId);if(!b)return;
  b.classList.remove('loading','playing');
  if(!on){b.textContent='ğŸ”Š';return;}
  if(state==='loading'){b.textContent='â³';b.classList.add('loading');}
  else{b.textContent='â¹ï¸';b.classList.add('playing');}
}

var _consentChunks=[],_consentChunkIdx=0;
function toggleConsentAudio(){
  if(ttsActive&&activeBtnId==='btn-consent-audio'){stopAllAudio();_consentChunks=[];_consentChunkIdx=0;return;}
  var fullText=T[lang].consent.text;
  speakText(fullText,'btn-consent-audio');
}

function showTextPopup(text){
  var p=document.getElementById('tts-popup');if(!p)return;
  p.textContent='ğŸ”Š '+text.substring(0,200)+(text.length>200?'â€¦':'');
  p.style.display='block';clearTimeout(p._t);
  p._t=setTimeout(function(){p.style.display='none';},6000);
}

// ================================================================
//  MICROPHONE (Voice Input)
// ================================================================
function startMic(field) {
  const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
  if (!SR) {
    alert('Voice input is only supported in Google Chrome or Edge. Please use one of those browsers.');
    return;
  }
  if (location.protocol !== 'https:' && location.hostname !== 'localhost' && location.hostname !== '127.0.0.1') {
    alert('Voice input requires a secure (HTTPS) connection. Please open this page over HTTPS.');
    return;
  }
  const btn = document.getElementById('mic-' + field);
  if (isRec) {
    if (recog) { try { recog.stop(); } catch(e) {} }
    isRec = false;
    if (curMicBtn) { curMicBtn.classList.remove('recording'); curMicBtn.textContent = 'ğŸ¤'; }
    curMicBtn = null; curMicField = null;
    return;
  }
  recog = new SR();
  recog.lang = lang; recog.interimResults = false; recog.maxAlternatives = 1; recog.continuous = false;
  recog.onstart = function () {
    isRec = true; curMicBtn = btn; curMicField = field;
    if (btn) { btn.classList.add('recording'); btn.textContent = 'â¹ï¸'; }
  };
  recog.onresult = function (e) {
    var transcript = e.results[0][0].transcript.trim();
    var numberFields = ['adultMales','adultFemales','children','totalMembers','aadhar','income','schoolDistance','landAcres','milchCount','milkYield'];
    var isNumericField = numberFields.indexOf(field) !== -1;
    var finalVal = transcript;
    if (isNumericField) {
      var cleaned = transcript.replace(/[,\s]/g, '');
      var num = parseInt(cleaned, 10);
      if (isNaN(num)) {
        var wordToNum = {'zero':0,'one':1,'two':2,'three':3,'four':4,'five':5,'six':6,'seven':7,'eight':8,'nine':9,'ten':10,'eleven':11,'twelve':12,'thirteen':13,'fourteen':14,'fifteen':15,'sixteen':16,'seventeen':17,'eighteen':18,'nineteen':19,'twenty':20,'thirty':30,'forty':40,'fifty':50,'sixty':60,'seventy':70,'eighty':80,'ninety':90,'hundred':100,'thousand':1000};
        var words = transcript.toLowerCase().split(/\s+/);
        var total = 0, current = 0;
        for (var wi = 0; wi < words.length; wi++) {
          var w = words[wi];
          if (wordToNum[w] !== undefined) {
            if (w === 'hundred') { current = (current || 1) * 100; }
            else if (w === 'thousand') { total += (current || 1) * 1000; current = 0; }
            else { current += wordToNum[w]; }
          }
        }
        num = total + current;
      }
      finalVal = (!isNaN(num) && num >= 0) ? num : transcript;
    }
    var audioEl = document.getElementById(field + 'Audio');
    if (audioEl) audioEl.value = finalVal;
    if (isNumericField && typeof finalVal === 'number') {
      var textEl = document.getElementById(field + 'Text');
      if (textEl) textEl.value = finalVal;
    }
  };
  recog.onerror = function (e) {
    isRec = false;
    if (curMicBtn) { curMicBtn.classList.remove('recording'); curMicBtn.textContent = 'ğŸ¤'; }
    curMicBtn = null; curMicField = null;
    var msg = '';
    switch (e.error) {
      case 'not-allowed': case 'permission-denied':
        msg = 'Microphone permission was denied.\n\nTo fix:\n1. Click the ğŸ”’ lock icon in the address bar.\n2. Set Microphone to "Allow".\n3. Reload the page.'; break;
      case 'no-speech': msg = 'No speech detected. Please try speaking again.'; break;
      case 'network': msg = 'A network error occurred. Please check your internet connection.'; break;
      case 'audio-capture': msg = 'No microphone found. Please connect a microphone and try again.'; break;
      default: msg = 'Speech recognition error: ' + e.error;
    }
    if (msg) alert(msg);
  };
  recog.onend = function () {
    isRec = false;
    if (curMicBtn) { curMicBtn.classList.remove('recording'); curMicBtn.textContent = 'ğŸ¤'; }
    curMicBtn = null; curMicField = null; recog = null;
  };
  try { recog.start(); } catch (err) {
    isRec = false;
    if (btn) { btn.classList.remove('recording'); btn.textContent = 'ğŸ¤'; }
    alert('Could not start microphone: ' + err.message);
  }
}

// ================================================================
//  SUBMIT FORM
// ================================================================
function submitForm() {
  stopAllAudio();
  if (formSubmitted) {
    showStatus(lang==='ta-IN'?'âœ… à®•à®£à®•à¯à®•à¯†à®Ÿà¯à®ªà¯à®ªà¯ à®à®±à¯à®•à®©à®µà¯‡ à®šà®®à®°à¯à®ªà¯à®ªà®¿à®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯.':'âœ… Survey already submitted.','success');
    return;
  }
  var isTa = (lang === 'ta-IN');
  function req(id,msgEn,msgTa){var el=document.getElementById(id);if(!el)return true;var v=el.value!==undefined?el.value.toString().trim():'';if(!v){showStatus(isTa?'âŒ '+msgTa:'âŒ '+msgEn,'error');el.focus();return false;}return true;}
  function reqSelect(name,msgEn,msgTa){if(!document.querySelector('input[name="'+name+'"]:checked')){showStatus(isTa?'âŒ '+msgTa:'âŒ '+msgEn,'error');return false;}return true;}
  function reqEither(id1,id2,msgEn,msgTa){var v1=(document.getElementById(id1)||{}).value||'';var v2=(document.getElementById(id2)||{}).value||'';if(!v1.trim()&&!v2.trim()){showStatus(isTa?'âŒ '+msgTa:'âŒ '+msgEn,'error');return false;}return true;}

  if(!reqSelect('village','Please select Village Name.','à®•à®¿à®°à®¾à®®à®¤à¯à®¤à¯ˆ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯.'))return;
  if(!reqEither('nameText','nameAudio','Please enter Respondent Name.','à®ªà®¤à®¿à®²à®³à®¿à®ªà¯à®ªà®µà®°à¯ à®ªà¯†à®¯à®°à¯ˆ à®‰à®³à¯à®³à®¿à®Ÿà®µà¯à®®à¯.'))return;
  if(!reqSelect('caste','Please select Social Category (Caste).','à®šà®®à¯‚à®• à®µà®•à¯ˆà®¯à¯ˆ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯.'))return;
  if(!reqSelect('house','Please select Type of House.','à®µà¯€à®Ÿà¯à®Ÿà®¿à®©à¯ à®µà®•à¯ˆà®¯à¯ˆ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯.'))return;
  if(!req('adultMales','Please enter Adult Males count.','à®µà®¯à®¤à¯à®•à¯à®•à¯ à®®à¯‡à®±à¯à®ªà®Ÿà¯à®Ÿ à®†à®£à¯à®•à®³à¯ à®à®£à¯à®£à®¿à®•à¯à®•à¯ˆ à®‰à®³à¯à®³à®¿à®Ÿà®µà¯à®®à¯.'))return;
  if(!req('adultFemales','Please enter Adult Females count.','à®µà®¯à®¤à¯à®•à¯à®•à¯ à®®à¯‡à®±à¯à®ªà®Ÿà¯à®Ÿ à®ªà¯†à®£à¯à®•à®³à¯ à®à®£à¯à®£à®¿à®•à¯à®•à¯ˆ à®‰à®³à¯à®³à®¿à®Ÿà®µà¯à®®à¯.'))return;
  if(!req('children','Please enter Children count.','à®•à¯à®´à®¨à¯à®¤à¯ˆà®•à®³à¯ à®à®£à¯à®£à®¿à®•à¯à®•à¯ˆ à®‰à®³à¯à®³à®¿à®Ÿà®µà¯à®®à¯.'))return;
  if(!reqSelect('hasaadhar','Please answer: Do you have Aadhaar card?','à®†à®¤à®¾à®°à¯ à®…à®Ÿà¯à®Ÿà¯ˆ à®‡à®°à¯à®•à¯à®•à®¿à®±à®¤à®¾ à®à®©à¯à®±à¯ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯.'))return;
  if(!reqSelect('income','Please select Primary Source of Income.','à®µà®°à¯à®®à®¾à®© à®†à®¤à®¾à®°à®¤à¯à®¤à¯ˆ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯.'))return;
  if(!req('incomeText','Please enter Monthly Income.','à®®à®¾à®¤à®¾à®¨à¯à®¤à®¿à®° à®µà®°à¯à®®à®¾à®©à®®à¯ à®‰à®³à¯à®³à®¿à®Ÿà®µà¯à®®à¯.'))return;
  if(!reqSelect('ration','Please select Ration Card Type.','à®°à¯‡à®·à®©à¯ à®…à®Ÿà¯à®Ÿà¯ˆ à®µà®•à¯ˆà®¯à¯ˆ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯.'))return;
  if(!reqSelect('loans','Please answer: Do you have outstanding loans?','à®•à®Ÿà®©à¯ à®¨à®¿à®²à®µà®°à®®à¯ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯.'))return;
  if(!reqSelect('migration','Please answer: Family member living outside for work?','à®•à¯à®Ÿà¯à®®à¯à®ª à®‡à®Ÿà®®à¯à®ªà¯†à®¯à®°à¯à®µà¯ à®ªà®¤à®¿à®²à¯ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯.'))return;
  if(!reqSelect('shgmember','Please answer: Are you an SHG member?','à®šà¯à®¯ à®‰à®¤à®µà®¿ à®•à¯à®´à¯ à®‰à®±à¯à®ªà¯à®ªà®¿à®©à®°à¯ à®ªà®¤à®¿à®²à¯ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯.'))return;
  if(!reqSelect('watersource','Please select Water Source.','à®•à¯à®Ÿà®¿à®¨à¯€à®°à¯ à®®à¯‚à®²à®¾à®¤à®¾à®°à®®à¯ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯.'))return;
  if(!reqSelect('watertreat','Please answer: Do you treat drinking water?','à®•à¯à®Ÿà®¿à®¨à¯€à®°à¯ à®šà¯à®¤à¯à®¤à®¿à®•à®°à®¿à®ªà¯à®ªà¯ à®ªà®¤à®¿à®²à¯ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯.'))return;
  if(!reqSelect('toilet','Please answer: Do you have a toilet?','à®•à®´à®¿à®µà®±à¯ˆ à®¨à®¿à®²à®µà®°à®®à¯ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯.'))return;
  if(!reqSelect('wasteseg','Please answer: Do you segregate waste?','à®•à®´à®¿à®µà¯ à®ªà®¿à®°à®¿à®ªà¯à®ªà¯ à®ªà®¤à®¿à®²à¯ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯.'))return;
  if(!reqSelect('land','Please answer: Do you own agricultural land?','à®µà®¿à®µà®šà®¾à®¯ à®¨à®¿à®²à®®à¯ à®¨à®¿à®²à®µà®°à®®à¯ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯.'))return;
  if(!reqSelect('milch','Please answer: Do you own Milch Animals?','à®•à®¾à®²à¯à®¨à®Ÿà¯ˆ à®¨à®¿à®²à®µà®°à®®à¯ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯.'))return;

  showProcessingOverlay(true);
  window._submitNameT = (document.getElementById('nameText')||{}).value||'';
  window._submitNameA = (document.getElementById('nameAudio')||{}).value||'';
  document.getElementById('submitBtn').disabled = true;
  _doSubmitSave('');
}

function _doSubmitSave(photoUrl) {
  const d = {
    photoUrl: photoUrl||'', langCode: lang, gpsLat: gpsLat, gpsLng: gpsLng,
    surveyDate: (document.getElementById('dateDisplay')||{}).textContent||'',
    consent: 'Yes',
    villageName: getSelected('village',false),
    nameText: window._submitNameT||'', nameAudio: window._submitNameA||'',
    socialCategory: getSelected('caste',false),
    houseType: getSelected('house',false),
    adultMales: (document.getElementById('adultMales')||{}).value||'',
    adultFemales: (document.getElementById('adultFemales')||{}).value||'',
    children: (document.getElementById('children')||{}).value||'',
    totalMembers: (document.getElementById('totalMembers')||{}).value||'',
    hasAadhar: getSelected('hasaadhar',false),
    aadharText: (document.getElementById('aadharText')||{}).value||'',
    aadharAudio: (document.getElementById('aadharAudio')||{}).value||'',
    primaryIncome: getSelected('income',false),
    incomeText: (document.getElementById('incomeText')||{}).value||'',
    incomeAudio: (document.getElementById('incomeAudio')||{}).value||'',
    rationCard: getSelected('ration',false),
    hasLoans: getSelected('loans',false),
    loanSource: getSelected('loansource',true),
    hasMigration: getSelected('migration',false),
    migrationFreq: getSelected('migfreq',false),
    isSHGMember: getSelected('shgmember',false),
    shgNameText: (document.getElementById('shgNameText')||{}).value||'',
    shgNameAudio: (document.getElementById('shgNameAudio')||{}).value||'',
    shgMeetFreq: getSelected('shgmeet',false),
    shgSaves: getSelected('shgsaves',false),
    shgLoan: getSelected('shgloan',false),
    shgLoanPurpose: getSelected('shgloanpurpose',false),
    enrolledMale: (document.getElementById('enrolledMale')||{}).value||'0',
    enrolledFemale: (document.getElementById('enrolledFemale')||{}).value||'0',
    dropoutMale: (document.getElementById('dropoutMale')||{}).value||'0',
    dropoutFemale: (document.getElementById('dropoutFemale')||{}).value||'0',
    neverMale: (document.getElementById('neverMale')||{}).value||'0',
    neverFemale: (document.getElementById('neverFemale')||{}).value||'0',
    schoolType: getSelected('schooltype',false),
    dropoutReason: getSelected('dropoutreason',false),
    schoolTravelMode: getSelected('travelmode',false),
    schoolDistance: (document.getElementById('schoolDistance')||{}).value||'',
    privateTuition: getSelected('tuition',false),
    learningStruggle: getSelected('learning',false),
    hasSmartphone: getSelected('smartphone',false),
    internetIndep: getSelected('internet',false),
    waterSource: getSelected('watersource',false),
    waterTreatment: getSelected('watertreat',false),
    hasToilet: getSelected('toilet',false),
    toiletUsable: getSelected('toiletusable',false),
    toiletUsers: getSelected('toiletusers',false),
    menstrualMaterial: getSelected('menstrual',false),
    menstrualDisposal: getSelected('menstrualdisposal',false),
    greenVegFreq: getSelected('greenveg',false),
    milkFreq: getSelected('milkfreq',false),
    bpMale: (document.getElementById('bpMale')||{}).value||'',
    bpFemale: (document.getElementById('bpFemale')||{}).value||'',
    diabetesMale: (document.getElementById('diabetesMale')||{}).value||'',
    diabetesFemale: (document.getElementById('diabetesFemale')||{}).value||'',
    wasteSegregation: getSelected('wasteseg',false),
    wetWasteDisposal: getSelected('wetwaste',false),
    dryWasteDisposal: getSelected('drywaste',false),
    wasteCollector: getSelected('wastecollect',false),
    ownsLand: getSelected('land',false),
    landAcres: (document.getElementById('landAcres')||{}).value||'',
    ownsMilchAnimals: getSelected('milch',false),
    milchCount: (document.getElementById('milchCount')||{}).value||'',
    milkYield: (document.getElementById('milkYield')||{}).value||'',
    fodderShortage: getSelected('fodder',false),
    cropWaterShortage: getSelected('cropwater',false)
  };

  // âœ… POST to Google Apps Script â€” works from GitHub Pages
  fetch(GAS_URL, {
    method: 'POST',
    mode: 'no-cors',
    headers: { 'Content-Type': 'text/plain' },
    body: JSON.stringify(d)
  })
  .then(function() {
    document.getElementById('submitBtn').disabled = false;
    onSuccess({ status: 'success' });
  })
  .catch(function(err) {
    document.getElementById('submitBtn').disabled = false;
    onError({ message: err.message || 'Network error. Please check your connection and try again.' });
  });
}

// ================================================================
//  SUCCESS
// ================================================================
function onSuccess(res) {
  showProcessingOverlay(false);
  formSubmitted = true;
  var isTa = (lang === 'ta-IN');
  var respondentName = (window._submitNameT || window._submitNameA || '').trim();
  var villageName = getSelected('village',false) || '';
  var today = (document.getElementById('dateDisplay')||{}).textContent || '';
  var appBody = document.getElementById('appBody');
  if (!appBody) return;
  var greeting = isTa
    ? (respondentName ? respondentName + ' à®…à®µà®°à¯à®•à®³à¯‡, à®µà®£à®•à¯à®•à®®à¯! ğŸ™' : 'à®µà®£à®•à¯à®•à®®à¯! ğŸ™')
    : (respondentName ? 'Dear ' + respondentName + ', ğŸ™' : 'Thank you! ğŸ™');
  appBody.innerHTML =
    '<div class="thankyou-wrap">' +
      '<div class="thankyou-icon">âœ…</div>' +
      '<div class="thankyou-org">Hand in Hand India Â· Project SIVD Phase I</div>' +
      '<div class="thankyou-heading">' + (isTa?'à®¨à®©à¯à®±à®¿!':'Survey Submitted!') + '</div>' +
      '<div style="font-size:20px;font-weight:700;color:#1565C0;margin-bottom:16px">' + greeting + '</div>' +
      '<div class="thankyou-card"><p>' +
        (isTa
          ? 'ğŸ“‹ à®‰à®™à¯à®•à®³à¯ à®•à®£à®•à¯à®•à¯†à®Ÿà¯à®ªà¯à®ªà¯ <strong>'+(today||'à®‡à®©à¯à®±à¯')+'</strong> à®…à®©à¯à®±à¯ à®µà¯†à®±à¯à®±à®¿à®•à®°à®®à®¾à®• à®ªà®¤à®¿à®µà¯ à®šà¯†à®¯à¯à®¯à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯.<br>à®•à®¿à®°à®¾à®®à®®à¯: <strong>'+(villageName||'â€”')+'</strong><br><br>ğŸ™Œ à®‰à®™à¯à®•à®³à¯ à®®à®¤à®¿à®ªà¯à®ªà¯à®®à®¿à®•à¯à®• à®ªà®™à¯à®•à®³à®¿à®ªà¯à®ªà®¿à®±à¯à®•à¯ à®®à®¿à®•à®µà¯à®®à¯ à®¨à®©à¯à®±à®¿.'
          : 'ğŸ“‹ Your response was recorded on <strong>'+(today||'today')+'</strong>.<br>Village: <strong>'+(villageName||'â€”')+'</strong><br><br>ğŸ™Œ Your valuable input will help plan better programmes for your community.') +
      '</p></div>' +
      '<hr class="thankyou-divider">' +
      '<div class="thankyou-footer">' +
        (isTa
          ? 'ğŸ“ à®‰à®™à¯à®•à®³à¯ à®•à®£à®•à¯à®•à¯†à®Ÿà¯à®ªà¯à®ªà¯ à®’à®°à¯à®™à¯à®•à®¿à®£à¯ˆà®ªà¯à®ªà®¾à®³à®°à®¿à®Ÿà®®à¯ à®¤à¯†à®°à®¿à®µà®¿à®•à¯à®•à®µà¯à®®à¯.<br>à®¤à®•à®µà®²à¯ à®®à¯à®±à¯à®±à®¿à®²à¯à®®à¯ à®°à®•à®šà®¿à®¯à®®à®¾à®• à®µà¯ˆà®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®®à¯.<br><br><em>Hand in Hand India â€“ à®®à®•à¯à®•à®³à¯ à®µà®¾à®´à¯à®•à¯à®•à¯ˆà®¯à¯ˆ à®®à¯‡à®®à¯à®ªà®Ÿà¯à®¤à¯à®¤à¯à®µà®¤à®±à¯à®•à®¾à®•</em>'
          : 'ğŸ“ Please inform your survey coordinator that this form has been submitted.<br>All information is kept strictly confidential.<br><br><em>Hand in Hand India â€“ Empowering people, transforming lives</em>') +
      '</div>' +
      '<div class="thankyou-stars">ğŸŒŸğŸŒŸğŸŒŸ</div>' +
    '</div>';
  window.scrollTo({ top:0, behavior:'smooth' });
}

function onError(err) {
  showProcessingOverlay(false);
  var isTa = (lang === 'ta-IN');
  showStatus('âŒ ' + (isTa?'à®ªà®¿à®´à¯ˆ: ':'Error: ') + ((err&&err.message)||err||'Unknown error'), 'error');
  var btn = document.getElementById('submitBtn');
  if (btn) btn.disabled = false;
}

function showStatus(msg,type) {
  const d = document.getElementById('status');
  if (!d) return;
  d.textContent = msg; d.className = 'status ' + type;
}
</script>
</body>
</html>
